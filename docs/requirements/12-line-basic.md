# LINEåŸºæœ¬é€£æºæ©Ÿèƒ½è¦ä»¶å®šç¾©æ›¸

## 1. æ¦‚è¦

### 1.1 ç›®çš„
æœ¬æ›¸ã¯ã€UTAGEã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé€£æºã®åŸºæœ¬æ©Ÿèƒ½ã«ã¤ã„ã¦ã€å®Ÿè£…ã«å¿…è¦ãªè©³ç´°è¦ä»¶ã‚’å®šç¾©ã™ã‚‹ã€‚

### 1.2 ã‚¹ã‚³ãƒ¼ãƒ—
ä»¥ä¸‹ã®8ã¤ã®åŸºæœ¬æ©Ÿèƒ½ã‚’å¯¾è±¡ã¨ã™ã‚‹ï¼š

1. LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
2. LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé€£æºè¨­å®š
3. LINE Developersç®¡ç†è€…æ¨©é™ä»˜ä¸
4. LINEãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€šæ•°ã‚«ã‚¦ãƒ³ãƒˆ
5. LINEãƒ†ã‚¹ãƒˆé€ä¿¡å…ˆè¨­å®š
6. LINEç™»éŒ²ãƒšãƒ¼ã‚¸è¨­å®š
7. LINEç™»éŒ²ãƒšãƒ¼ã‚¸URLå–å¾—
8. LINEç™»éŒ²QRã‚³ãƒ¼ãƒ‰ç”»åƒå–å¾—

### 1.3 é‡è¦ãªå‰ææ¡ä»¶

- LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯å€‹äººLINEã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨ã¯åˆ¥ç‰©ã§ã‚ã‚Šã€å°‚ç”¨ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆãŒå¿…é ˆ
- LINEæ ªå¼ä¼šç¤¾ï¼ˆLINEãƒ¤ãƒ•ãƒ¼æ ªå¼ä¼šç¤¾ï¼‰ã®åˆ©ç”¨è¦ç´„ã€ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã€ãƒãƒªã‚·ãƒ¼ã¸ã®æº–æ‹ ãŒå¿…é ˆ
- LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ©ç”¨ã«ã¯åˆ¥é€”ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³æ–™é‡‘ãŒç™ºç”Ÿ
- Messaging APIã¨LINEãƒ­ã‚°ã‚¤ãƒ³èªè¨¼ã§ç•°ãªã‚‹èªè¨¼æƒ…å ±ï¼ˆChannel IDã€Channel Secretï¼‰ãŒå¿…è¦

---

## 2. LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé€£æºè¦ä»¶

### 2.1 èªè¨¼æ–¹å¼

#### 2.1.1 æ¨å¥¨èªè¨¼æ–¹å¼
**LINEãƒ­ã‚°ã‚¤ãƒ³èªè¨¼ã‚’å¼·ãæ¨å¥¨**

#### 2.1.2 å¿…è¦ãªèªè¨¼æƒ…å ±

```typescript
interface LineAccountCredentials {
  // Messaging APIç”¨
  messagingApi: {
    channelId: string;        // Channel ID (Messaging API)
    channelSecret: string;    // Channel Secret (Messaging API)
  };

  // LINEãƒ­ã‚°ã‚¤ãƒ³èªè¨¼ç”¨ï¼ˆæ¨å¥¨ï¼‰
  lineLogin: {
    channelId: string;        // Channel ID (LINE Login) â€»Messaging APIã¨åˆ¥ã®å€¤
    channelSecret: string;    // Channel Secret (LINE Login) â€»Messaging APIã¨åˆ¥ã®å€¤
  };
}
```

**é‡è¦:** 4ã¤ã®èªè¨¼æƒ…å ±ã¯ã™ã¹ã¦ç•°ãªã‚‹å€¤ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

### 2.2 Webhookè¨­å®š

```typescript
interface WebhookConfig {
  webhookUrl: string;          // è‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹Webhook URL
  webhookEnabled: boolean;     // Webhookæœ‰åŠ¹åŒ–ãƒ•ãƒ©ã‚°
  autoGenerated: boolean;      // è‡ªå‹•ç”Ÿæˆãƒ•ãƒ©ã‚°ï¼ˆæ‰‹å‹•å…¥åŠ›ä¸å¯ï¼‰
}
```

**åˆ¶ç´„äº‹é …:**
- Webhook URLã¯é€£æºæˆåŠŸå¾Œã«è‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚ˆã‚‹æ‰‹å‹•å…¥åŠ›ã¯ç¦æ­¢

### 2.3 ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åã®ä¸€è²«æ€§

LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨LINE Developersã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åã¯ä¸€è‡´ã•ã›ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

```typescript
interface ProviderConfig {
  providerName: string;        // LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨LINE Developersã§åŒä¸€
  mustMatch: true;             // ä¸€è‡´å¿…é ˆãƒ•ãƒ©ã‚°
}
```

---

## 3. å„æ©Ÿèƒ½ã®è©³ç´°è¦ä»¶

### 3.1 LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ

#### 3.1.1 æ©Ÿèƒ½æ¦‚è¦
LINE Businessç™»éŒ²ãƒãƒ¼ã‚¿ãƒ«ã‚’é€šã˜ã¦LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’æ–°è¦ä½œæˆã™ã‚‹ã€‚

#### 3.1.2 å¿…è¦ãªå…¥åŠ›æƒ…å ±

```typescript
interface LineOfficialAccountCreationForm {
  // Step 7: ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè©³ç´°
  accountName: string;              // ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåï¼ˆå…¬é–‹è¡¨ç¤ºåï¼‰
  email: string;                    // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
  companyName: string;              // ä¼šç¤¾å/äº‹æ¥­è€…å

  // Step 8: æ¥­ç¨®é¸æŠ
  businessCategory: {
    major: string;                  // å¤§åˆ†é¡ï¼ˆãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³é¸æŠï¼‰
    minor: string;                  // å°åˆ†é¡ï¼ˆãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³é¸æŠï¼‰
  };
}
```

#### 3.1.3 ä½œæˆãƒ•ãƒ­ãƒ¼

```typescript
interface AccountCreationFlow {
  steps: [
    {
      step: 1;
      action: "LINE Businessç™»éŒ²ãƒãƒ¼ã‚¿ãƒ«ã«ã‚¢ã‚¯ã‚»ã‚¹";
      ui: "ã€ŒLINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’å§‹ã‚ã‚‹ã€ãƒœã‚¿ãƒ³";
    },
    {
      step: 2;
      action: "ç™»éŒ²æ–¹æ³•é¸æŠ";
      ui: "ã€ŒLINEã‚¢ã‚«ã‚¦ãƒ³ãƒˆã€ãƒœã‚¿ãƒ³";
    },
    {
      step: 3;
      action: "ãƒ­ã‚°ã‚¤ãƒ³æ–¹æ³•é¸æŠ";
      ui: "QRã‚³ãƒ¼ãƒ‰ãƒ­ã‚°ã‚¤ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³";
    },
    {
      step: 4;
      action: "QRã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³";
      ui: "QRã‚³ãƒ¼ãƒ‰è¡¨ç¤ºã€LINEã‚¢ãƒ—ãƒªã®QRãƒªãƒ¼ãƒ€ãƒ¼ä½¿ç”¨";
    },
    {
      step: 5;
      action: "èªè¨¼ã‚³ãƒ¼ãƒ‰å…¥åŠ›";
      ui: "4æ¡ã®èªè¨¼ã‚³ãƒ¼ãƒ‰å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰";
    },
    {
      step: 6;
      action: "ä½œæˆé–‹å§‹";
      ui: "ã€Œä½œæˆã€ãƒœã‚¿ãƒ³";
    },
    {
      step: 7;
      action: "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±å…¥åŠ›";
      ui: "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã€ä¼šç¤¾åå…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰";
    },
    {
      step: 8;
      action: "æ¥­ç¨®é¸æŠ";
      ui: "å¤§åˆ†é¡ãƒ»å°åˆ†é¡ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³";
    },
    {
      step: 9;
      action: "ç¢ºèªãƒ»å®Œäº†";
      ui: "ç¢ºèªç”»é¢ã€ã€Œå®Œäº†ã€ãƒœã‚¿ãƒ³";
    }
  ];
}
```

#### 3.1.4 UIè¦ç´ 

```typescript
interface AccountCreationUI {
  buttons: {
    startLineOfficialAccount: string;    // "LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’å§‹ã‚ã‚‹"
    selectLineAccount: string;           // "LINEã‚¢ã‚«ã‚¦ãƒ³ãƒˆ"
    create: string;                      // "ä½œæˆ"
    complete: string;                    // "å®Œäº†"
  };

  forms: {
    accountName: InputField;
    email: InputField;
    companyName: InputField;
    businessCategoryMajor: DropdownField;
    businessCategoryMinor: DropdownField;
  };

  qrCodeDisplay: {
    visible: boolean;
    loginQrCode: string;                 // QRã‚³ãƒ¼ãƒ‰ç”»åƒ
  };

  verificationCodeInput: {
    digits: 4;
    type: "number";
  };
}
```

---

### 3.2 LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé€£æºè¨­å®š

#### 3.2.1 æ©Ÿèƒ½æ¦‚è¦
LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨UTAGEã‚·ã‚¹ãƒ†ãƒ ã‚’é€£æºã•ã›ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é…ä¿¡æ©Ÿèƒ½ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ã€‚

#### 3.2.2 é€£æºè¨­å®šãƒ•ãƒ­ãƒ¼

```typescript
interface LineIntegrationFlow {
  steps: [
    {
      step: 1;
      action: "Messaging APIæœ‰åŠ¹åŒ–";
      location: "LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®š > Messaging API";
      ui: "ã€ŒMessaging APIã‚’åˆ©ç”¨ã™ã‚‹ã€ãƒœã‚¿ãƒ³";
    },
    {
      step: 2;
      action: "èªè¨¼æƒ…å ±å…¥åŠ›ï¼ˆMessaging APIï¼‰";
      location: "UTAGE > ãƒ¡ãƒ¼ãƒ«/LINEé…ä¿¡ > LINEã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®š";
      ui: "Channel IDã€Channel Secretå…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰";
    },
    {
      step: 3;
      action: "LINEãƒ­ã‚°ã‚¤ãƒ³èªè¨¼è¨­å®š";
      location: "LINE Developers Console";
      ui: "LINEãƒ­ã‚°ã‚¤ãƒ³ãƒãƒ£ãƒãƒ«ä½œæˆã€èªè¨¼æƒ…å ±å–å¾—";
    },
    {
      step: 4;
      action: "èªè¨¼æƒ…å ±å…¥åŠ›ï¼ˆLINEãƒ­ã‚°ã‚¤ãƒ³ï¼‰";
      location: "UTAGE > LINEã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®š";
      ui: "LINEãƒ­ã‚°ã‚¤ãƒ³ç”¨Channel IDã€Channel Secretå…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰";
    },
    {
      step: 5;
      action: "Webhookæœ‰åŠ¹åŒ–";
      location: "LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®š";
      ui: "Webhookæœ‰åŠ¹åŒ–ãƒˆã‚°ãƒ«";
    },
    {
      step: 6;
      action: "ãƒ†ã‚¹ãƒˆé…ä¿¡";
      location: "UTAGE";
      ui: "ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªä½œæˆã€QRã‚³ãƒ¼ãƒ‰ç™»éŒ²ã€é…ä¿¡ç¢ºèª";
    }
  ];
}
```

#### 3.2.3 è¨­å®šç”»é¢UI

```typescript
interface LineAccountSettingsUI {
  // ãƒ¡ãƒ¼ãƒ«/LINEé…ä¿¡ãƒ¡ãƒ‹ãƒ¥ãƒ¼å†…
  menu: {
    path: "ãƒ¡ãƒ¼ãƒ«/LINEé…ä¿¡ > LINEã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®š";
  };

  // Messaging APIè¨­å®šã‚»ã‚¯ã‚·ãƒ§ãƒ³
  messagingApiSection: {
    title: "Messaging APIè¨­å®š";
    fields: {
      channelId: {
        label: "Channel ID";
        type: "text";
        required: true;
        placeholder: "Messaging API Channel ID";
      };
      channelSecret: {
        label: "Channel Secret";
        type: "password";
        required: true;
        placeholder: "Messaging API Channel Secret";
      };
    };
  };

  // LINEãƒ­ã‚°ã‚¤ãƒ³èªè¨¼è¨­å®šã‚»ã‚¯ã‚·ãƒ§ãƒ³
  lineLoginSection: {
    title: "LINEãƒ­ã‚°ã‚¤ãƒ³èªè¨¼è¨­å®šï¼ˆæ¨å¥¨ï¼‰";
    recommendationBadge: true;
    fields: {
      channelId: {
        label: "Channel IDï¼ˆèªè¨¼ç”¨ï¼‰";
        type: "text";
        required: true;
        placeholder: "LINE Login Channel ID";
        validation: "Messaging API Channel IDã¨ç•°ãªã‚‹å€¤";
      };
      channelSecret: {
        label: "Channel Secretï¼ˆèªè¨¼ç”¨ï¼‰";
        type: "password";
        required: true;
        placeholder: "LINE Login Channel Secret";
        validation: "Messaging API Channel Secretã¨ç•°ãªã‚‹å€¤";
      };
    };
  };

  // Webhookè¨­å®šã‚»ã‚¯ã‚·ãƒ§ãƒ³
  webhookSection: {
    title: "Webhookè¨­å®š";
    fields: {
      webhookUrl: {
        label: "Webhook URL";
        type: "text";
        readonly: true;
        autoGenerated: true;
        helpText: "é€£æºæˆåŠŸå¾Œã«è‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã™ã€‚æ‰‹å‹•å…¥åŠ›ä¸å¯ã€‚";
      };
    };
  };

  // ä¿å­˜ãƒœã‚¿ãƒ³
  actions: {
    save: {
      label: "ä¿å­˜";
      type: "submit";
      validation: "å…¨å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å…¥åŠ›ç¢ºèª";
    };
  };
}
```

#### 3.2.4 æ¤œè¨¼è¦ä»¶

```typescript
interface IntegrationValidation {
  // èªè¨¼æƒ…å ±ã®ä¸€æ„æ€§æ¤œè¨¼
  credentialUniqueness: {
    messagingApiChannelId: string;
    messagingApiChannelSecret: string;
    lineLoginChannelId: string;
    lineLoginChannelSecret: string;

    validate(): {
      allUnique: boolean;
      duplicates: string[];
    };
  };

  // ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åä¸€è‡´æ¤œè¨¼
  providerNameMatch: {
    lineOfficialAccountProvider: string;
    lineDevelopersProvider: string;

    validate(): {
      match: boolean;
      error?: string;
    };
  };

  // Webhook URLè‡ªå‹•ç”Ÿæˆæ¤œè¨¼
  webhookValidation: {
    isAutoGenerated: boolean;
    isManuallyEntered: boolean;

    validate(): {
      valid: boolean;
      error?: string;
    };
  };
}
```

---

### 3.3 LINE Developersç®¡ç†è€…æ¨©é™ä»˜ä¸

#### 3.3.1 æ©Ÿèƒ½æ¦‚è¦
å¤–éƒ¨ã®å®Ÿè£…æ‹…å½“è€…ã«LINE Developersç®¡ç†ç”»é¢ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚’ä»˜ä¸ã™ã‚‹ã€‚

#### 3.3.2 æ¨©é™ä»˜ä¸ãƒ•ãƒ­ãƒ¼

```typescript
interface AdminPermissionGrantFlow {
  // å‰ææ¡ä»¶
  prerequisites: {
    requiredRole: "LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒ­ã‚°ã‚¤ãƒ³èªè¨¼æƒ…å ±ã‚’æŒã¤ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ‰€æœ‰è€…";
    platform: "LINE Developers (https://developers.line.biz/ja/)";
  };

  // å®Ÿè¡Œæ‰‹é †
  steps: [
    {
      step: 1;
      action: "LINE Developersã«ãƒ­ã‚°ã‚¤ãƒ³";
      actor: "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ‰€æœ‰è€…";
    },
    {
      step: 2;
      action: "æ‹›å¾…ãƒ¡ãƒ¼ãƒ«é€ä¿¡";
      ui: "æ‹›å¾…ãƒ¡ãƒ¼ãƒ«é€ä¿¡æ©Ÿèƒ½";
      input: "æ‹›å¾…å…ˆãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹";
    },
    {
      step: 3;
      action: "ç®¡ç†è€…æ¨©é™ä»˜ä¸";
      permission: "Admin";
      ui: "æ¨©é™ãƒ¬ãƒ™ãƒ«é¸æŠãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³";
    },
    {
      step: 4;
      action: "æ‹›å¾…å®Œäº†";
      result: "æ‹›å¾…ã•ã‚ŒãŸLINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒLINE Developersç®¡ç†ç”»é¢ã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ãªã‚‹";
    }
  ];
}
```

#### 3.3.3 æ¨©é™ç®¡ç†ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

```typescript
interface DevelopersPermission {
  invitationId: string;
  inviter: {
    accountId: string;
    email: string;
    role: "Owner";
  };

  invitee: {
    email: string;
    role: "Admin" | "Member" | "Tester";
    status: "Pending" | "Accepted" | "Declined";
    invitedAt: Date;
    acceptedAt?: Date;
  };

  permissions: {
    accessLineDevelopers: boolean;
    manageMessagingApi: boolean;
    manageLineLogin: boolean;
    viewAnalytics: boolean;
  };
}
```

#### 3.3.4 UIè¦ç´ 

```typescript
interface AdminPermissionUI {
  // LINE Developersç®¡ç†ç”»é¢
  location: "LINE Developers > ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ > ãƒ¡ãƒ³ãƒãƒ¼ç®¡ç†";

  invitationForm: {
    fields: {
      email: {
        label: "æ‹›å¾…å…ˆãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹";
        type: "email";
        required: true;
      };
      role: {
        label: "æ¨©é™ãƒ¬ãƒ™ãƒ«";
        type: "select";
        options: ["Admin", "Member", "Tester"];
        default: "Admin";
      };
    };

    actions: {
      sendInvitation: {
        label: "æ‹›å¾…ãƒ¡ãƒ¼ãƒ«é€ä¿¡";
        type: "submit";
      };
    };
  };

  memberList: {
    columns: ["ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹", "æ¨©é™ãƒ¬ãƒ™ãƒ«", "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹", "æ‹›å¾…æ—¥æ™‚"];
    actions: ["æ¨©é™å¤‰æ›´", "å‰Šé™¤"];
  };
}
```

---

### 3.4 LINEãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€šæ•°ã‚«ã‚¦ãƒ³ãƒˆ

#### 3.4.1 æ©Ÿèƒ½æ¦‚è¦
LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆAPIçµŒç”±ã§é…ä¿¡ã•ã‚Œã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€šæ•°ã‚’æ­£ç¢ºã«ã‚«ã‚¦ãƒ³ãƒˆã—ã€èª²é‡‘ãƒ»åˆ¶é™ç®¡ç†ã‚’è¡Œã†ã€‚

#### 3.4.2 ã‚«ã‚¦ãƒ³ãƒˆãƒ­ã‚¸ãƒƒã‚¯

```typescript
interface MessageCountLogic {
  // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¦ç´ ã®ç¨®é¡
  messageElements: [
    "text",       // ãƒ†ã‚­ã‚¹ãƒˆ
    "image",      // ç”»åƒ
    "button",     // ãƒœã‚¿ãƒ³
    "carousel",   // ã‚«ãƒ«ãƒ¼ã‚»ãƒ«
    "audio",      // éŸ³å£°
    "video",      // å‹•ç”»
    "sticker"     // ã‚¹ã‚¿ãƒ³ãƒ—
  ];

  // ã‚«ã‚¦ãƒ³ãƒˆãƒ«ãƒ¼ãƒ«
  countingRule: {
    description: "æœ€å¤§5å€‹ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¦ç´ ã‚’çµ„ã¿åˆã‚ã›ãŸ1å›ã®é…ä¿¡ = 1é€šã¨ã—ã¦ã‚«ã‚¦ãƒ³ãƒˆ";
    maxElementsPerMessage: 5;
    countAsOneMessage: true;
  };

  // å¯¾è±¡é…ä¿¡ã‚¿ã‚¤ãƒ—
  applicableDistributionTypes: [
    "LINEä¸€æ–‰é…ä¿¡",      // LINE broadcast distribution
    "ã‚¹ãƒ†ãƒƒãƒ—é…ä¿¡",       // Step distribution
    "ãƒªãƒã‚¤ãƒ³ãƒ€é…ä¿¡",     // Reminder distribution
    "LINEãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé…ä¿¡" // LINE template distribution
  ];
}
```

#### 3.4.3 ã‚«ã‚¦ãƒ³ãƒˆä¾‹

```typescript
interface MessageCountExample {
  scenario1: {
    elements: [
      { type: "text", content: "ã“ã‚“ã«ã¡ã¯" },
      { type: "image", url: "https://example.com/image.jpg" },
      { type: "button", label: "è©³ç´°ã¯ã“ã¡ã‚‰", url: "https://example.com" }
    ];
    totalElements: 3;
    messageCount: 1;  // 3è¦ç´ ã§ã‚‚1é€šã¨ã—ã¦ã‚«ã‚¦ãƒ³ãƒˆ
  };

  scenario2: {
    elements: [
      { type: "text", content: "ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³æƒ…å ±" },
      { type: "image", url: "https://example.com/campaign.jpg" },
      { type: "carousel", items: 5 },
      { type: "video", url: "https://example.com/promo.mp4" },
      { type: "button", label: "ä»Šã™ãç™»éŒ²", url: "https://example.com/register" }
    ];
    totalElements: 5;
    messageCount: 1;  // æœ€å¤§5è¦ç´ ã§ã‚‚1é€šã¨ã—ã¦ã‚«ã‚¦ãƒ³ãƒˆ
  };
}
```

#### 3.4.4 ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

```typescript
interface MessageCountTracking {
  accountId: string;
  period: {
    startDate: Date;
    endDate: Date;
    type: "daily" | "monthly" | "custom";
  };

  counts: {
    totalMessages: number;           // ç·ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€šæ•°
    broadcastMessages: number;       // ä¸€æ–‰é…ä¿¡
    stepMessages: number;            // ã‚¹ãƒ†ãƒƒãƒ—é…ä¿¡
    reminderMessages: number;        // ãƒªãƒã‚¤ãƒ³ãƒ€é…ä¿¡
    templateMessages: number;        // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé…ä¿¡
  };

  quota: {
    planType: "Free" | "Light" | "Standard";
    monthlyLimit: number;            // æœˆé–“ä¸Šé™ï¼ˆãƒ—ãƒ©ãƒ³ã«ã‚ˆã‚‹ï¼‰
    remainingMessages: number;       // æ®‹ã‚Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ•°
    resetDate: Date;                 // ãƒªã‚»ãƒƒãƒˆæ—¥ï¼ˆæ¯æœˆ1æ—¥ï¼‰
  };

  messageDetails: Array<{
    messageId: string;
    sentAt: Date;
    distributionType: string;
    elementCount: number;            // å«ã¾ã‚Œã‚‹è¦ç´ æ•°ï¼ˆ1-5ï¼‰
    countedAs: 1;                    // å¸¸ã«1é€šã¨ã—ã¦ã‚«ã‚¦ãƒ³ãƒˆ
    recipients: number;              // é€ä¿¡å…ˆäººæ•°
    totalCounted: number;            // recipients Ã— 1
  }>;

  // LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä»•æ§˜å¤‰æ›´å¯¾å¿œ
  specificationVersion: {
    version: string;
    lastUpdated: Date;
    changelog: string;
    note: "LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä»•æ§˜ã¯äºˆå‘Šãªãå¤‰æ›´ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹";
  };
}
```

#### 3.4.5 UIè¦ç´ 

```typescript
interface MessageCountUI {
  // ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡¨ç¤º
  dashboard: {
    currentMonthCount: {
      label: "ä»Šæœˆã®é…ä¿¡é€šæ•°";
      value: number;
      format: "N,NNNé€š";
    };

    remainingQuota: {
      label: "æ®‹ã‚Šé…ä¿¡å¯èƒ½æ•°";
      value: number;
      format: "N,NNNé€š";
      warning: "ä¸Šé™ã®80%ã«é”ã—ãŸå ´åˆã«è­¦å‘Šè¡¨ç¤º";
    };

    planInfo: {
      label: "ç¾åœ¨ã®ãƒ—ãƒ©ãƒ³";
      value: string;
      monthlyLimit: number;
    };

    resetDate: {
      label: "æ¬¡å›ãƒªã‚»ãƒƒãƒˆæ—¥";
      value: Date;
      format: "YYYYå¹´MMæœˆDDæ—¥";
    };
  };

  // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è©³ç´°ä¸€è¦§
  messageList: {
    columns: [
      "é…ä¿¡æ—¥æ™‚",
      "é…ä¿¡ã‚¿ã‚¤ãƒ—",
      "è¦ç´ æ•°",
      "é€ä¿¡å…ˆäººæ•°",
      "ã‚«ã‚¦ãƒ³ãƒˆé€šæ•°"
    ];

    filters: {
      dateRange: DateRangePicker;
      distributionType: MultiSelect;
    };

    exportButton: {
      label: "CSVå‡ºåŠ›";
      format: "CSV";
    };
  };

  // æ¯”è¼ƒè¡¨ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
  comparisonChart: {
    title: "LINEé€šæ•°ã‚«ã‚¦ãƒ³ãƒˆæ¯”è¼ƒè¡¨";
    format: "PDF";
    lastUpdated: "2024å¹´9æœˆ18æ—¥";
    downloadButton: {
      label: "æ¯”è¼ƒè¡¨ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰";
    };
  };
}
```

---

### 3.5 LINEãƒ†ã‚¹ãƒˆé€ä¿¡å…ˆè¨­å®š

#### 3.5.1 æ©Ÿèƒ½æ¦‚è¦
LINEé…ä¿¡ï¼ˆä¸€æ–‰é€ä¿¡ã€ã‚¹ãƒ†ãƒƒãƒ—é…ä¿¡ã€ãƒªãƒã‚¤ãƒ³ãƒ€é…ä¿¡ï¼‰ã®å‰ã«ã€äº‹å‰è¨­å®šã—ãŸLINEã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ãƒ†ã‚¹ãƒˆé€ä¿¡ã‚’è¡Œã†æ©Ÿèƒ½ã€‚

#### 3.5.2 è¨­å®šãƒ•ãƒ­ãƒ¼

```typescript
interface TestDestinationSetupFlow {
  navigationPath: "ãƒ¡ãƒ¼ãƒ«/LINEé…ä¿¡ > ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå > LINEå‹ã ã¡ï¼ˆå·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼‰";

  steps: [
    {
      step: 1;
      action: "LINEå‹ã ã¡ä¸€è¦§ã«ã‚¢ã‚¯ã‚»ã‚¹";
      location: "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå†…ã®LINEå‹ã ã¡ãƒªã‚¹ãƒˆ";
    },
    {
      step: 2;
      action: "ãƒ†ã‚¹ãƒˆå¯¾è±¡ã®LINEå‹ã ã¡ã‚’é¸æŠ";
      ui: "å‹ã ã¡ä¸€è¦§ã‹ã‚‰é¸æŠ";
    },
    {
      step: 3;
      action: "å‹ã ã¡è©³ç´°ã‚’é–‹ã";
      ui: "ã€Œå‹ã ã¡è©³ç´°ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³";
    },
    {
      step: 4;
      action: "ãƒ†ã‚¹ãƒˆé€ä¿¡å…ˆã¨ã—ã¦æŒ‡å®š";
      ui: "ãƒ†ã‚¹ãƒˆé€ä¿¡å…ˆæŒ‡å®šãƒœã‚¿ãƒ³";
    }
  ];
}
```

#### 3.5.3 ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

```typescript
interface TestDestination {
  friendId: string;                    // LINEå‹ã ã¡ID
  userId: string;                      // LINEãƒ¦ãƒ¼ã‚¶ãƒ¼ID
  displayName: string;                 // è¡¨ç¤ºå
  isTestDestination: boolean;          // ãƒ†ã‚¹ãƒˆé€ä¿¡å…ˆãƒ•ãƒ©ã‚°

  // ãƒ†ã‚¹ãƒˆé€ä¿¡å…ˆè¨­å®šæƒ…å ±
  testSettings: {
    setAt: Date;                       // è¨­å®šæ—¥æ™‚
    setBy: string;                     // è¨­å®šè€…
    enabled: boolean;                  // æœ‰åŠ¹/ç„¡åŠ¹
  };

  // å‹ã ã¡åŸºæœ¬æƒ…å ±
  friendInfo: {
    addedAt: Date;                     // å‹ã ã¡è¿½åŠ æ—¥æ™‚
    blocked: boolean;                  // ãƒ–ãƒ­ãƒƒã‚¯çŠ¶æ…‹
    scenarios: string[];               // ç™»éŒ²ã‚·ãƒŠãƒªã‚ªID
  };
}
```

#### 3.5.4 ãƒ†ã‚¹ãƒˆé€ä¿¡UI

```typescript
interface TestSendingUI {
  // ãƒ†ã‚¹ãƒˆé€ä¿¡ãƒ‘ãƒãƒ«
  testPanel: {
    location: "é…ä¿¡ä½œæˆç”»é¢å†…";

    destinationSelector: {
      label: "ãƒ†ã‚¹ãƒˆé€ä¿¡å…ˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’é¸æŠã—ã¦ãã ã•ã„";
      type: "dropdown";
      options: Array<{
        value: string;              // friendId
        label: string;              // displayName
        isTestDestination: boolean;
      }>;
      emptyMessage: "ãƒ†ã‚¹ãƒˆé€ä¿¡å…ˆãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“";
    };

    sendButton: {
      label: "ãƒ†ã‚¹ãƒˆé€ä¿¡";
      type: "button";
      disabled: "ãƒ†ã‚¹ãƒˆé€ä¿¡å…ˆæœªé¸æŠæ™‚";
      confirmDialog: {
        title: "ãƒ†ã‚¹ãƒˆé€ä¿¡ç¢ºèª";
        message: "é¸æŠã—ãŸã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ãƒ†ã‚¹ãƒˆé€ä¿¡ã—ã¾ã™ã‹ï¼Ÿ";
        confirmButton: "é€ä¿¡";
        cancelButton: "ã‚­ãƒ£ãƒ³ã‚»ãƒ«";
      };
    };

    messagePreview: {
      title: "é€ä¿¡å†…å®¹ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼";
      display: "å®Ÿéš›ã«é€ä¿¡ã•ã‚Œã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¡¨ç¤º";
      elementCount: number;
      estimatedCount: 1;              // å¸¸ã«1é€šã¨ã—ã¦ã‚«ã‚¦ãƒ³ãƒˆ
    };
  };

  // å‹ã ã¡è©³ç´°ç”»é¢
  friendDetail: {
    location: "ãƒ¡ãƒ¼ãƒ«/LINEé…ä¿¡ > LINEå‹ã ã¡ > å‹ã ã¡è©³ç´°";

    testDestinationToggle: {
      label: "ãƒ†ã‚¹ãƒˆé€ä¿¡å…ˆã¨ã—ã¦è¨­å®š";
      type: "toggle";
      currentState: boolean;
      onChange: "è¨­å®šçŠ¶æ…‹ã®åˆ‡ã‚Šæ›¿ãˆ";
    };

    friendInfo: {
      displayName: string;
      userId: string;
      addedAt: Date;
      scenarios: string[];
    };
  };

  // LINEå‹ã ã¡ä¸€è¦§ç”»é¢
  friendList: {
    columns: [
      "è¡¨ç¤ºå",
      "ãƒ¦ãƒ¼ã‚¶ãƒ¼ID",
      "å‹ã ã¡è¿½åŠ æ—¥",
      "ãƒ†ã‚¹ãƒˆé€ä¿¡å…ˆ",
      "ã‚¢ã‚¯ã‚·ãƒ§ãƒ³"
    ];

    testDestinationBadge: {
      display: "ãƒ†ã‚¹ãƒˆé€ä¿¡å…ˆã«è¨­å®šã•ã‚Œã¦ã„ã‚‹å‹ã ã¡ã«ãƒãƒƒã‚¸è¡¨ç¤º";
      label: "ãƒ†ã‚¹ãƒˆ";
      color: "blue";
    };

    filters: {
      showTestDestinationsOnly: {
        label: "ãƒ†ã‚¹ãƒˆé€ä¿¡å…ˆã®ã¿è¡¨ç¤º";
        type: "checkbox";
      };
    };
  };
}
```

#### 3.5.5 ãƒ†ã‚¹ãƒˆé€ä¿¡ãƒ­ã‚°

```typescript
interface TestSendingLog {
  logId: string;
  sentAt: Date;
  sentBy: string;                      // é€ä¿¡è€…ID

  destination: {
    friendId: string;
    userId: string;
    displayName: string;
  };

  message: {
    distributionType: "broadcast" | "step" | "reminder";
    elements: Array<{
      type: string;
      content: any;
    }>;
    elementCount: number;
  };

  result: {
    success: boolean;
    deliveredAt?: Date;
    error?: {
      code: string;
      message: string;
    };
  };
}
```

---

### 3.6 LINEç™»éŒ²ãƒšãƒ¼ã‚¸è¨­å®š

#### 3.6.1 æ©Ÿèƒ½æ¦‚è¦
LINEç™»éŒ²ãƒšãƒ¼ã‚¸ã®é‡è¤‡ç™»éŒ²è¨­å®šã¨JavaScriptã‚³ãƒ¼ãƒ‰æŒ¿å…¥ã‚’ç®¡ç†ã™ã‚‹ã€‚

#### 3.6.2 é‡è¤‡ç™»éŒ²è¨­å®š

```typescript
interface DuplicateRegistrationSettings {
  // èªè¨¼æ–¹å¼ã«ã‚ˆã‚‹è¡¨ç¤ºåˆ¶å¾¡
  displayCondition: {
    authMethod: "LINEãƒ­ã‚°ã‚¤ãƒ³èªè¨¼";  // ã“ã®èªè¨¼æ–¹å¼ã§ã®ã¿è¡¨ç¤º
    notDisplayFor: ["ç°¡æ˜“èªè¨¼", "ç”»åƒèªè¨¼"];
  };

  // è¨­å®šå€¤
  allowDuplicates: boolean;
  defaultValue: false;                   // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ã€Œé‡è¤‡ç™»éŒ²ã‚’è¨±å¯ã—ãªã„ã€

  // å‹•ä½œ
  behavior: {
    whenDuplicateAttempt: {
      allowed: "åŒä¸€LINEã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§è¤‡æ•°ã®ã‚·ãƒŠãƒªã‚ªã«ç™»éŒ²å¯èƒ½";
      notAllowed: "æ—¢ã«ã‚·ãƒŠãƒªã‚ªç™»éŒ²æ¸ˆã¿ã®å ´åˆã€ç™»éŒ²ã‚’ãƒ–ãƒ­ãƒƒã‚¯";
    };
  };
}
```

#### 3.6.3 JavaScriptæŒ¿å…¥è¨­å®š

```typescript
interface JavaScriptInjectionSettings {
  // æŒ¿å…¥ãƒã‚¤ãƒ³ãƒˆ
  injectionPoints: {
    headEnd: {
      label: "headã‚¿ã‚°çµ‚äº†æ™‚ã«æŒ¿å…¥ã™ã‚‹JavaScript";
      code: string;
      position: "</head>ç›´å‰";
      useCase: "å¤–éƒ¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆèª­ã¿è¾¼ã¿ã€ãƒ¡ã‚¿ã‚¿ã‚°è¨­å®šãªã©";
    };

    bodyStart: {
      label: "bodyã‚¿ã‚°é–‹å§‹æ™‚ã«æŒ¿å…¥ã™ã‚‹JavaScript";
      code: string;
      position: "<body>ç›´å¾Œ";
      useCase: "Google Tag Managerã€ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚³ãƒ¼ãƒ‰ãªã©";
    };

    bodyEnd: {
      label: "bodyã‚¿ã‚°çµ‚äº†æ™‚ã«æŒ¿å…¥ã™ã‚‹JavaScript";
      code: string;
      position: "</body>ç›´å‰";
      useCase: "ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ã€ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã€é…å»¶èª­ã¿è¾¼ã¿ã‚¹ã‚¯ãƒªãƒ—ãƒˆãªã©";
    };
  };

  // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
  validation: {
    maxLength: 10000;                    // æœ€å¤§æ–‡å­—æ•°
    allowedTags: ["<script>", "</script>"];
    sanitization: false;                  // ã‚µãƒ‹ã‚¿ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ç„¡ã—ï¼ˆç®¡ç†è€…å…¥åŠ›ã®ãŸã‚ï¼‰
  };
}
```

#### 3.6.4 ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

```typescript
interface LineRegistrationPageSettings {
  scenarioId: string;

  // é‡è¤‡ç™»éŒ²è¨­å®š
  duplicateRegistration: {
    authMethod: "LINEãƒ­ã‚°ã‚¤ãƒ³èªè¨¼" | "ç°¡æ˜“èªè¨¼" | "ç”»åƒèªè¨¼";
    allowDuplicates: boolean;
    updatedAt: Date;
    updatedBy: string;
  };

  // JavaScriptæŒ¿å…¥è¨­å®š
  customScripts: {
    headEnd: {
      enabled: boolean;
      code: string;
      lastModified: Date;
    };
    bodyStart: {
      enabled: boolean;
      code: string;
      lastModified: Date;
    };
    bodyEnd: {
      enabled: boolean;
      code: string;
      lastModified: Date;
    };
  };

  // ãƒšãƒ¼ã‚¸åŸºæœ¬æƒ…å ±
  pageInfo: {
    pageId: string;
    url: string;
    qrCodeUrl: string;
    createdAt: Date;
    status: "active" | "inactive";
  };
}
```

#### 3.6.5 UIè¦ç´ 

```typescript
interface RegistrationPageSettingsUI {
  location: "ã‚·ãƒŠãƒªã‚ªç®¡ç† > é¸æŠã‚·ãƒŠãƒªã‚ª > LINEç™»éŒ²ãƒšãƒ¼ã‚¸è¨­å®š";

  // é‡è¤‡ç™»éŒ²è¨­å®šã‚»ã‚¯ã‚·ãƒ§ãƒ³
  duplicateSection: {
    title: "é‡è¤‡ç™»éŒ²è¨­å®š";

    // LINEãƒ­ã‚°ã‚¤ãƒ³èªè¨¼æ™‚ã®ã¿è¡¨ç¤º
    conditionalDisplay: {
      condition: "authMethod === 'LINEãƒ­ã‚°ã‚¤ãƒ³èªè¨¼'";
      message: "â€»ã“ã®è¨­å®šã¯LINEãƒ­ã‚°ã‚¤ãƒ³èªè¨¼æ™‚ã®ã¿æœ‰åŠ¹ã§ã™";
    };

    toggle: {
      label: "é‡è¤‡ç™»éŒ²ã‚’è¨±å¯ã™ã‚‹";
      type: "toggle";
      default: false;
      helpText: "åŒä¸€LINEã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒæ—¢ã«ã‚·ãƒŠãƒªã‚ªç™»éŒ²æ¸ˆã¿ã®å ´åˆã®å‹•ä½œã‚’è¨­å®šã—ã¾ã™";
    };
  };

  // JavaScriptæŒ¿å…¥ã‚»ã‚¯ã‚·ãƒ§ãƒ³
  scriptSection: {
    title: "ã‚«ã‚¹ã‚¿ãƒ JavaScriptè¨­å®š";

    headEndField: {
      label: "headã‚¿ã‚°çµ‚äº†æ™‚ã«æŒ¿å…¥ã™ã‚‹JavaScript";
      type: "textarea";
      rows: 10;
      placeholder: "<script>\n// ã“ã“ã«ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›\n</script>";
      helpText: "</head>ç›´å‰ã«æŒ¿å…¥ã•ã‚Œã¾ã™";
    };

    bodyStartField: {
      label: "bodyã‚¿ã‚°é–‹å§‹æ™‚ã«æŒ¿å…¥ã™ã‚‹JavaScript";
      type: "textarea";
      rows: 10;
      placeholder: "<script>\n// ã“ã“ã«ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›\n</script>";
      helpText: "<body>ç›´å¾Œã«æŒ¿å…¥ã•ã‚Œã¾ã™";
    };

    bodyEndField: {
      label: "bodyã‚¿ã‚°çµ‚äº†æ™‚ã«æŒ¿å…¥ã™ã‚‹JavaScript";
      type: "textarea";
      rows: 10;
      placeholder: "<script>\n// ã“ã“ã«ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›\n</script>";
      helpText: "</body>ç›´å‰ã«æŒ¿å…¥ã•ã‚Œã¾ã™";
    };
  };

  // ä¿å­˜ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  actions: {
    saveButton: {
      label: "è¨­å®šã‚’ä¿å­˜";
      type: "submit";
      confirmDialog: {
        title: "è¨­å®šä¿å­˜ç¢ºèª";
        message: "LINEç™»éŒ²ãƒšãƒ¼ã‚¸è¨­å®šã‚’ä¿å­˜ã—ã¾ã™ã‹ï¼Ÿ";
      };
    };

    previewButton: {
      label: "ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼";
      type: "button";
      action: "æ–°ã—ã„ã‚¿ãƒ–ã§ç™»éŒ²ãƒšãƒ¼ã‚¸ã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º";
    };
  };
}
```

---

### 3.7 LINEç™»éŒ²ãƒšãƒ¼ã‚¸URLå–å¾—

#### 3.7.1 æ©Ÿèƒ½æ¦‚è¦
ã‚·ãƒŠãƒªã‚ªã”ã¨ã®LINEç™»éŒ²ãƒšãƒ¼ã‚¸URLã¨QRã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã—ã€ãƒ¡ãƒ¼ãƒ«é…ä¿¡ã‚„ãƒœã‚¿ãƒ³ãƒªãƒ³ã‚¯ã«åˆ©ç”¨ã™ã‚‹ã€‚

#### 3.7.2 URLå–å¾—ãƒ•ãƒ­ãƒ¼

```typescript
interface RegistrationPageUrlFlow {
  navigationPath: "ã‚·ãƒŠãƒªã‚ªç®¡ç† > é¸æŠã‚·ãƒŠãƒªã‚ª > LINEç™»éŒ²ãƒšãƒ¼ã‚¸ï¼ˆå·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’2å›ã‚¯ãƒªãƒƒã‚¯ï¼‰";

  steps: [
    {
      step: 1;
      action: "ã‚·ãƒŠãƒªã‚ªç®¡ç†ã«ã‚¢ã‚¯ã‚»ã‚¹";
      ui: "å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€Œã‚·ãƒŠãƒªã‚ªç®¡ç†ã€";
    },
    {
      step: 2;
      action: "å¯¾è±¡ã‚·ãƒŠãƒªã‚ªã‚’é¸æŠ";
      ui: "ã‚·ãƒŠãƒªã‚ªä¸€è¦§ã‹ã‚‰é¸æŠ";
    },
    {
      step: 3;
      action: "LINEç™»éŒ²ãƒšãƒ¼ã‚¸ã‚’é–‹ã";
      ui: "å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€ŒLINEç™»éŒ²ãƒšãƒ¼ã‚¸ã€ã‚’2å›ã‚¯ãƒªãƒƒã‚¯";
      result: "åˆ¥ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§QRã‚³ãƒ¼ãƒ‰ã¨ç™»éŒ²ãƒšãƒ¼ã‚¸URLãŒè¡¨ç¤ºã•ã‚Œã‚‹";
    }
  ];
}
```

#### 3.7.3 URLä»•æ§˜

```typescript
interface RegistrationPageUrl {
  // URLæ§‹é€ 
  url: string;                           // å®Œå…¨ãªURL
  structure: {
    protocol: "https://";
    domain: string;                      // ãƒ•ã‚¡ãƒãƒ«ãƒšãƒ¼ã‚¸ã¨åŒä¸€ãƒ‰ãƒ¡ã‚¤ãƒ³å¿…é ˆ
    path: string;
    queryParams: {
      scenarioId: string;
      // rid: string ã¯å«ã¾ã‚Œã¦ã¯ã„ã‘ãªã„ï¼ˆé‡è¦ï¼‰
    };
  };

  // ãƒ‰ãƒ¡ã‚¤ãƒ³ä¸€è‡´è¦ä»¶
  domainRequirement: {
    funnelPageDomain: string;
    lineRegistrationDomain: string;
    mustMatch: true;
    reason: "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ç™»éŒ²ã¨LINEç™»éŒ²ãƒ‡ãƒ¼ã‚¿ã®çµ±åˆã®ãŸã‚";
    errorMessage: "ãƒ‰ãƒ¡ã‚¤ãƒ³åã¯å¿…ãšä¸€è‡´ã•ã›ã¦ãã ã•ã„";
  };

  // ä½¿ç”¨ç”¨é€”
  useCases: [
    {
      type: "ãƒ¡ãƒ¼ãƒ«é…ä¿¡";
      description: "ãƒ¡ãƒ¼ãƒ«æœ¬æ–‡å†…ã«ãƒªãƒ³ã‚¯ã¨ã—ã¦æŒ¿å…¥";
    },
    {
      type: "ãƒœã‚¿ãƒ³è¦ç´ ";
      description: "ãƒ•ã‚¡ãƒãƒ«ãƒšãƒ¼ã‚¸ã®ãƒœã‚¿ãƒ³ãƒªãƒ³ã‚¯å…ˆã¨ã—ã¦è¨­å®š";
    },
    {
      type: "å¤–éƒ¨ã‚µã‚¤ãƒˆ";
      description: "è‡ªç¤¾ã‚µã‚¤ãƒˆã‚„LPç­‰ã‹ã‚‰ã®ãƒªãƒ³ã‚¯";
    }
  ];

  // ãƒ¢ãƒã‚¤ãƒ«å‹•ä½œ
  mobileBehavior: {
    description: "ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§é–‹ã„ãŸéš›ã€LINEã‚¢ãƒ—ãƒªãŒè‡ªå‹•èµ·å‹•";
    flow: [
      "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒURLã‚’ã‚¿ãƒƒãƒ—",
      "LINEã‚¢ãƒ—ãƒªãŒèµ·å‹•",
      "å‹ã ã¡è¿½åŠ ç”»é¢ãŒè¡¨ç¤º",
      "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå‹ã ã¡è¿½åŠ ã‚’ã‚¿ãƒƒãƒ—",
      "ã‚·ãƒŠãƒªã‚ªã«èª­è€…ç™»éŒ²å®Œäº†"
    ];
  };
}
```

#### 3.7.4 ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

```typescript
interface RegistrationPageUrlData {
  scenarioId: string;
  scenarioName: string;

  // URLæƒ…å ±
  registrationUrl: {
    fullUrl: string;
    shortUrl?: string;                   // çŸ­ç¸®URLï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
    qrCodeImageUrl: string;              // QRã‚³ãƒ¼ãƒ‰ç”»åƒURL
    createdAt: Date;
    expiresAt?: Date;                    // æœ‰åŠ¹æœŸé™ï¼ˆç„¡æœŸé™ã®å ´åˆã¯nullï¼‰
  };

  // QRã‚³ãƒ¼ãƒ‰æƒ…å ±
  qrCode: {
    imageUrl: string;
    imageData: string;                   // Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ç”»åƒ
    size: {
      width: number;
      height: number;
    };
    format: "PNG" | "SVG";
  };

  // çµ±è¨ˆæƒ…å ±
  statistics: {
    totalScans: number;                  // QRã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³å›æ•°
    totalUrlClicks: number;              // URLç›´æ¥ã‚¯ãƒªãƒƒã‚¯å›æ•°
    registrations: number;               // å®Ÿéš›ã®ç™»éŒ²å®Œäº†æ•°
    lastAccessedAt?: Date;
  };
}
```

#### 3.7.5 UIè¦ç´ 

```typescript
interface RegistrationPageUrlUI {
  // åˆ¥ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦è¡¨ç¤º
  displayWindow: {
    title: "LINEç™»éŒ²ãƒšãƒ¼ã‚¸";
    size: {
      width: 600;
      height: 800;
    };
    modal: false;                        // åˆ¥ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã¨ã—ã¦é–‹ã
  };

  // QRã‚³ãƒ¼ãƒ‰è¡¨ç¤ºã‚¨ãƒªã‚¢
  qrCodeSection: {
    title: "LINEç™»éŒ²QRã‚³ãƒ¼ãƒ‰";

    qrCodeImage: {
      src: string;
      alt: "LINEç™»éŒ²QRã‚³ãƒ¼ãƒ‰";
      size: {
        width: 300;
        height: 300;
      };
    };

    downloadButton: {
      label: "QRã‚³ãƒ¼ãƒ‰ç”»åƒã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰";
      type: "button";
      format: "PNG";
      filename: `line-qr-${scenarioId}.png`;
    };
  };

  // URLè¡¨ç¤ºã‚¨ãƒªã‚¢
  urlSection: {
    title: "LINEç™»éŒ²ãƒšãƒ¼ã‚¸URL";

    urlDisplay: {
      value: string;
      type: "text";
      readonly: true;
      selectOnClick: true;               // ã‚¯ãƒªãƒƒã‚¯ã§å…¨é¸æŠ
    };

    copyButton: {
      label: "URLã‚’ã‚³ãƒ”ãƒ¼";
      type: "button";
      action: "ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼";
      successMessage: "URLã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ";
    };

    helpText: {
      content: "ãƒ¡ãƒ¼ãƒ«é…ä¿¡ã‚„ãƒœã‚¿ãƒ³è¦ç´ ãªã©ã«ãƒªãƒ³ã‚¯è¨­å®šã™ã‚‹å ´åˆã¯ã€ã“ã®URLã‚’ã”åˆ©ç”¨ãã ã•ã„";
      icon: "info";
    };
  };

  // é‡è¦ãªæ³¨æ„äº‹é …
  warningSection: {
    type: "alert";
    severity: "warning";
    title: "é‡è¦ï¼šãƒ‰ãƒ¡ã‚¤ãƒ³ä¸€è‡´ã®ç¢ºèª";
    content: "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ç™»éŒ²æ™‚ã®ãƒ•ã‚¡ãƒãƒ«ãƒšãƒ¼ã‚¸ãƒ‰ãƒ¡ã‚¤ãƒ³ã¨LINEç™»éŒ²æ™‚ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã¯å¿…ãšä¸€è‡´ã•ã›ã¦ãã ã•ã„";

    domainComparison: {
      funnelDomain: {
        label: "ãƒ•ã‚¡ãƒãƒ«ãƒšãƒ¼ã‚¸ãƒ‰ãƒ¡ã‚¤ãƒ³";
        value: string;
      };
      lineDomain: {
        label: "LINEç™»éŒ²ãƒšãƒ¼ã‚¸ãƒ‰ãƒ¡ã‚¤ãƒ³";
        value: string;
      };
      matchStatus: {
        icon: boolean;                   // ä¸€è‡´:âœ“ ä¸ä¸€è‡´:âœ—
        color: boolean;                  // ä¸€è‡´:green ä¸ä¸€è‡´:red
      };
    };
  };

  // ä½¿ç”¨ä¾‹è¡¨ç¤º
  usageExamples: {
    title: "ä½¿ç”¨ä¾‹";

    emailExample: {
      title: "ãƒ¡ãƒ¼ãƒ«é…ä¿¡ã§ã®ä½¿ç”¨";
      code: `<a href="${registrationUrl}">LINEå‹ã ã¡è¿½åŠ ã¯ã“ã¡ã‚‰</a>`;
    };

    buttonExample: {
      title: "ãƒœã‚¿ãƒ³è¦ç´ ã§ã®ä½¿ç”¨";
      description: "ãƒœã‚¿ãƒ³ã®ãƒªãƒ³ã‚¯å…ˆURLã«ã“ã®URLã‚’è¨­å®š";
    };
  };
}
```

---

### 3.8 LINEç™»éŒ²QRã‚³ãƒ¼ãƒ‰ç”»åƒå–å¾—

#### 3.8.1 æ©Ÿèƒ½æ¦‚è¦
LINEç™»éŒ²ç”¨QRã‚³ãƒ¼ãƒ‰ç”»åƒã‚’å®‰å…¨ã«å–å¾—ã—ã€å¤–éƒ¨ã§ã®ä½¿ç”¨ï¼ˆãƒãƒ©ã‚·ã€ãƒã‚¹ã‚¿ãƒ¼ã€SNSç­‰ï¼‰ã‚’å¯èƒ½ã«ã™ã‚‹ã€‚

#### 3.8.2 é‡è¦ãªå‰ææ¡ä»¶

```typescript
interface QrCodeRetrievalPrecautions {
  criticalWarning: {
    issue: "ridï¼ˆreader IDï¼‰ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ··å…¥";
    risk: "å¤§é‡ã®æ„å›³ã—ãªã„ç™»éŒ²ãŒç™ºç”Ÿã—ã€é‡è¤‡èª­è€…ãƒ‡ãƒ¼ã‚¿ã®å¾©æ—§ãŒå›°é›£ã«ãªã‚‹";
    prevention: "å¿…ãšãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚°ãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ç”¨";
  };

  requiredBrowserMode: {
    chrome: "ã‚²ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰";
    firefox: "ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦";
    safari: "æ–°è¦ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦";
    reason: "æ—¢å­˜ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±ï¼ˆridç­‰ï¼‰ã‚’å«ã¾ãªã„ã‚¯ãƒªãƒ¼ãƒ³ãªçŠ¶æ…‹ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚";
  };
}
```

#### 3.8.3 QRã‚³ãƒ¼ãƒ‰å–å¾—ãƒ•ãƒ­ãƒ¼

```typescript
interface QrCodeRetrievalFlow {
  steps: [
    {
      step: 1;
      action: "ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹åŒ–";
      browsers: {
        chrome: "ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ > ã‚²ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰";
        firefox: "ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’èµ·å‹•";
        safari: "æ–°è¦ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é¸æŠ";
      };
      critical: true;
      validation: "ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒ¢ãƒ¼ãƒ‰ç¢ºèª";
    },
    {
      step: 2;
      action: "LINEç™»éŒ²ãƒšãƒ¼ã‚¸URLã‚’ã‚³ãƒ”ãƒ¼";
      location: "UTAGE > ãƒ¡ãƒ¼ãƒ«/LINEé…ä¿¡ > ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ > ã‚·ãƒŠãƒªã‚ª > LINEç™»éŒ²ãƒšãƒ¼ã‚¸";
      ui: "URLã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³";
    },
    {
      step: 3;
      action: "ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§URLã«ã‚¢ã‚¯ã‚»ã‚¹";
      validation: "ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ãªã„ã“ã¨ã‚’ç¢ºèª";
    },
    {
      step: 4;
      action: "è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹QRã‚³ãƒ¼ãƒ‰ç”»åƒã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰";
      method: "å³ã‚¯ãƒªãƒƒã‚¯ > åå‰ã‚’ä»˜ã‘ã¦ç”»åƒã‚’ä¿å­˜";
      format: "PNG";
    },
    {
      step: 5;
      action: "QRã‚³ãƒ¼ãƒ‰URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¤œè¨¼ï¼ˆå¿…é ˆï¼‰";
      tool: "QRãƒ‡ã‚³ãƒ¼ãƒ€ãƒ¼ï¼ˆä¾‹ï¼štool-taro.comï¼‰";
      validation: {
        check: "ridãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã¦ã„ãªã„ã“ã¨ã‚’ç¢ºèª";
        pass: "ridãŒå«ã¾ã‚Œã¦ã„ãªã„ â†’ ä½¿ç”¨å¯èƒ½";
        fail: "ridãŒå«ã¾ã‚Œã¦ã„ã‚‹ â†’ Step1ã‹ã‚‰æ‰‹é †ã‚’ã‚„ã‚Šç›´ã™";
      };
      critical: true;
    }
  ];
}
```

#### 3.8.4 QRã‚³ãƒ¼ãƒ‰æ¤œè¨¼

```typescript
interface QrCodeValidation {
  // ãƒ‡ã‚³ãƒ¼ãƒ‰çµæœã®æ§‹é€ 
  decodedUrl: {
    fullUrl: string;
    parsedUrl: {
      protocol: string;
      domain: string;
      path: string;
      queryParams: {
        [key: string]: string;
      };
    };
  };

  // æ¤œè¨¼ãƒ«ãƒ¼ãƒ«
  validationRules: {
    // å¿…é ˆãƒã‚§ãƒƒã‚¯ï¼šridãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå­˜åœ¨ã—ãªã„ã“ã¨
    ridCheck: {
      paramName: "rid";
      mustNotExist: true;
      errorMessage: "ridãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã§å†åº¦å–å¾—ã—ã¦ãã ã•ã„ã€‚";
      severity: "critical";
    };

    // æ¨å¥¨ãƒã‚§ãƒƒã‚¯ï¼šé©åˆ‡ãªãƒ‰ãƒ¡ã‚¤ãƒ³
    domainCheck: {
      expectedDomain: string;
      actualDomain: string;
      shouldMatch: true;
      severity: "warning";
    };

    // æ¨å¥¨ãƒã‚§ãƒƒã‚¯ï¼šscenarioIdã®å­˜åœ¨
    scenarioIdCheck: {
      paramName: "scenarioId";
      shouldExist: true;
      severity: "warning";
    };
  };

  // æ¤œè¨¼çµæœ
  validationResult: {
    isValid: boolean;
    errors: Array<{
      rule: string;
      severity: "critical" | "warning";
      message: string;
    }>;
    canUseQrCode: boolean;
  };
}
```

#### 3.8.5 ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

```typescript
interface QrCodeImage {
  imageId: string;
  scenarioId: string;

  // ç”»åƒãƒ‡ãƒ¼ã‚¿
  image: {
    url: string;                         // ç”»åƒURL
    base64Data: string;                  // Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿
    format: "PNG" | "SVG";
    size: {
      width: number;
      height: number;
    };
    fileSize: number;                    // ãƒã‚¤ãƒˆå˜ä½
  };

  // QRã‚³ãƒ¼ãƒ‰å†…å®¹
  qrContent: {
    encodedUrl: string;
    decodedUrl: {
      protocol: string;
      domain: string;
      path: string;
      queryParams: {
        scenarioId: string;
        // rid: ridã¯å«ã¾ã‚Œã¦ã¯ã„ã‘ãªã„
      };
    };
  };

  // æ¤œè¨¼æƒ…å ±
  validation: {
    validatedAt: Date;
    isValid: boolean;
    ridCheck: {
      passed: boolean;
      hasRid: boolean;
    };
    validationMethod: "manual" | "automated";
  };

  // å–å¾—æƒ…å ±
  retrieval: {
    retrievedAt: Date;
    retrievedBy: string;
    browserMode: "private" | "regular";
    retrievalMethod: "download" | "api";
  };

  // ä½¿ç”¨çŠ¶æ³
  usage: {
    usageType: Array<"å°åˆ·ç‰©" | "SNS" | "ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ" | "ãã®ä»–">;
    distributionDate?: Date;
    notes?: string;
  };
}
```

#### 3.8.6 UIè¦ç´ 

```typescript
interface QrCodeRetrievalUI {
  // æ‰‹é †ã‚¬ã‚¤ãƒ‰è¡¨ç¤º
  instructionGuide: {
    title: "LINEç™»éŒ²QRã‚³ãƒ¼ãƒ‰ç”»åƒã®å®‰å…¨ãªå–å¾—æ–¹æ³•";
    type: "step-by-step";

    steps: [
      {
        stepNumber: 1;
        title: "ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹åŒ–";
        content: {
          chrome: "ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ > ã‚²ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰";
          firefox: "ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’èµ·å‹•";
          safari: "æ–°è¦ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é¸æŠ";
        };
        icon: "ğŸ”’";
        critical: true;
      },
      {
        stepNumber: 2;
        title: "LINEç™»éŒ²ãƒšãƒ¼ã‚¸URLã‚’ã‚³ãƒ”ãƒ¼";
        action: "URLã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯";
        icon: "ğŸ“‹";
      },
      {
        stepNumber: 3;
        title: "ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã§URLã«ã‚¢ã‚¯ã‚»ã‚¹";
        warning: "é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã§ã¯ã‚¢ã‚¯ã‚»ã‚¹ã—ãªã„ã§ãã ã•ã„";
        icon: "ğŸŒ";
      },
      {
        stepNumber: 4;
        title: "QRã‚³ãƒ¼ãƒ‰ç”»åƒã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰";
        action: "å³ã‚¯ãƒªãƒƒã‚¯ > åå‰ã‚’ä»˜ã‘ã¦ç”»åƒã‚’ä¿å­˜";
        icon: "ğŸ’¾";
      },
      {
        stepNumber: 5;
        title: "QRã‚³ãƒ¼ãƒ‰URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¤œè¨¼ï¼ˆå¿…é ˆï¼‰";
        tool: "QRãƒ‡ã‚³ãƒ¼ãƒ€ãƒ¼ä½¿ç”¨";
        validation: "ridãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã¦ã„ãªã„ã“ã¨ã‚’ç¢ºèª";
        icon: "âœ“";
        critical: true;
      }
    ];
  };

  // è­¦å‘Šè¡¨ç¤º
  warningSection: {
    type: "alert";
    severity: "error";
    title: "é‡è¦ãªæ³¨æ„äº‹é …";
    content: "ridãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå«ã¾ã‚ŒãŸQRã‚³ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€å¤§é‡ã®æ„å›³ã—ãªã„ç™»éŒ²ãŒç™ºç”Ÿã—ã€å¾©æ—§ãŒå›°é›£ã¨ãªã‚Šã¾ã™ã€‚";

    risks: [
      "å¤§é‡ã®é‡è¤‡èª­è€…ãƒ‡ãƒ¼ã‚¿ãŒç™ºç”Ÿ",
      "ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ•´åˆæ€§å–ªå¤±",
      "å¾©æ—§ãŒæ¥µã‚ã¦å›°é›£",
      "é…ä¿¡ãƒªã‚¹ãƒˆã®ä¿¡é ¼æ€§ä½ä¸‹"
    ];

    prevention: {
      title: "é˜²æ­¢ç­–";
      items: [
        "å¿…ãšãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã‚’ä½¿ç”¨",
        "å–å¾—å¾Œã¯å¿…ãšQRã‚³ãƒ¼ãƒ‰ã‚’æ¤œè¨¼",
        "ridãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã¯å†å–å¾—"
      ];
    };
  };

  // QRã‚³ãƒ¼ãƒ‰æ¤œè¨¼ãƒ„ãƒ¼ãƒ«
  validationTool: {
    title: "QRã‚³ãƒ¼ãƒ‰æ¤œè¨¼ãƒ„ãƒ¼ãƒ«";

    uploadSection: {
      label: "QRã‚³ãƒ¼ãƒ‰ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰";
      type: "file";
      accept: "image/png, image/jpeg";
      dragAndDrop: true;
    };

    validateButton: {
      label: "æ¤œè¨¼é–‹å§‹";
      type: "button";
      action: "QRã‚³ãƒ¼ãƒ‰ã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰ã—ã¦URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¤œè¨¼";
    };

    resultDisplay: {
      decodedUrl: {
        label: "ãƒ‡ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸURL";
        value: string;
        copyable: true;
      };

      ridCheck: {
        label: "ridãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒã‚§ãƒƒã‚¯";
        status: "pass" | "fail";
        icon: "âœ“" | "âœ—";
        color: "green" | "red";
        message: string;
      };

      overallResult: {
        label: "æ¤œè¨¼çµæœ";
        status: "å®‰å…¨ã«ä½¿ç”¨ã§ãã¾ã™" | "ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚å†å–å¾—ã—ã¦ãã ã•ã„";
        color: "green" | "red";
      };
    };
  };

  // æ¨å¥¨QRãƒ‡ã‚³ãƒ¼ãƒ€ãƒ¼ãƒªãƒ³ã‚¯
  externalTools: {
    title: "æ¨å¥¨QRã‚³ãƒ¼ãƒ‰æ¤œè¨¼ãƒ„ãƒ¼ãƒ«";
    tools: [
      {
        name: "Tool Taro QRãƒ‡ã‚³ãƒ¼ãƒ€ãƒ¼";
        url: "https://tool-taro.com";
        description: "ç„¡æ–™ã®ã‚ªãƒ³ãƒ©ã‚¤ãƒ³QRã‚³ãƒ¼ãƒ‰ãƒ‡ã‚³ãƒ¼ãƒ€ãƒ¼";
      }
    ];
  };
}
```

#### 3.8.7 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

```typescript
interface QrCodeErrorHandling {
  // ridãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¤œå‡ºæ™‚
  ridDetectedError: {
    errorCode: "QR_001";
    severity: "critical";
    message: "ridãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ";
    userMessage: "ã“ã®QRã‚³ãƒ¼ãƒ‰ã¯ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚Step1ã‹ã‚‰æ‰‹é †ã‚’ã‚„ã‚Šç›´ã—ã¦ãã ã•ã„ã€‚";
    action: "å†å–å¾—ãŒå¿…è¦";
    preventUsage: true;
  };

  // ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒ¢ãƒ¼ãƒ‰æœªä½¿ç”¨è­¦å‘Š
  nonPrivateModeWarning: {
    errorCode: "QR_002";
    severity: "warning";
    message: "é€šå¸¸ãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚°ãƒ¢ãƒ¼ãƒ‰ã§å–å¾—ã•ã‚ŒãŸå¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™";
    userMessage: "ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã§å–å¾—ã—ãŸã‹ç¢ºèªã—ã¦ãã ã•ã„";
    action: "æ¤œè¨¼æ¨å¥¨";
  };

  // QRã‚³ãƒ¼ãƒ‰ãƒ‡ã‚³ãƒ¼ãƒ‰å¤±æ•—
  decodeFailureError: {
    errorCode: "QR_003";
    severity: "error";
    message: "QRã‚³ãƒ¼ãƒ‰ã®ãƒ‡ã‚³ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ";
    userMessage: "ç”»åƒãŒç ´æã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚å†åº¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚";
    action: "å†ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰";
  };
}
```

---

## 4. APIé€£æºè¦ä»¶

### 4.1 LINE Messaging API

```typescript
interface MessagingApiIntegration {
  // ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  endpoints: {
    baseUrl: "https://api.line.me/v2/bot";

    pushMessage: {
      path: "/message/push";
      method: "POST";
      description: "ç‰¹å®šã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãƒ—ãƒƒã‚·ãƒ¥é€ä¿¡";
    };

    broadcast: {
      path: "/message/broadcast";
      method: "POST";
      description: "å…¨å‹ã ã¡ã«ä¸€æ–‰é…ä¿¡";
    };

    multicast: {
      path: "/message/multicast";
      method: "POST";
      description: "è¤‡æ•°ã®ç‰¹å®šãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€ä¿¡";
    };

    replyMessage: {
      path: "/message/reply";
      method: "POST";
      description: "ãƒªãƒ—ãƒ©ã‚¤ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ç”¨ã—ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ä¿¡";
    };
  };

  // èªè¨¼
  authentication: {
    method: "Bearer Token";
    header: "Authorization";
    tokenFormat: "Bearer {Channel Access Token}";
  };

  // ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£
  messageRequest: {
    to?: string;                         // ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆpush/multicastç”¨ï¼‰
    messages: Array<{
      type: "text" | "image" | "video" | "audio" | "location" | "sticker" | "template";
      // typeåˆ¥ã®è©³ç´°ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
      text?: string;
      packageId?: string;
      stickerId?: string;
      // ... ãã®ä»–ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
    }>;
    notificationDisabled?: boolean;
  };

  // ãƒ¬ã‚¹ãƒãƒ³ã‚¹
  messageResponse: {
    sentMessages?: Array<{
      id: string;
      quoteToken?: string;
    }>;
    error?: {
      message: string;
      details?: Array<{
        message: string;
        property: string;
      }>;
    };
  };
}
```

### 4.2 LINE Login API

```typescript
interface LineLoginApiIntegration {
  // èªå¯ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  authorization: {
    url: "https://access.line.me/oauth2/v2.1/authorize";
    method: "GET";
    params: {
      response_type: "code";
      client_id: string;                 // Channel IDï¼ˆLINE Loginï¼‰
      redirect_uri: string;              // ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯URL
      state: string;                     // CSRFå¯¾ç­–ãƒˆãƒ¼ã‚¯ãƒ³
      scope: "profile openid email";
      nonce?: string;                    // ãƒªãƒ—ãƒ¬ã‚¤ã‚¢ã‚¿ãƒƒã‚¯å¯¾ç­–
    };
  };

  // ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  token: {
    url: "https://api.line.me/oauth2/v2.1/token";
    method: "POST";
    headers: {
      "Content-Type": "application/x-www-form-urlencoded";
    };
    body: {
      grant_type: "authorization_code";
      code: string;                      // èªå¯ã‚³ãƒ¼ãƒ‰
      redirect_uri: string;
      client_id: string;
      client_secret: string;             // Channel Secretï¼ˆLINE Loginï¼‰
    };
    response: {
      access_token: string;
      expires_in: number;
      id_token: string;
      refresh_token: string;
      scope: string;
      token_type: "Bearer";
    };
  };

  // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å–å¾—ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  profile: {
    url: "https://api.line.me/v2/profile";
    method: "GET";
    headers: {
      Authorization: "Bearer {access_token}";
    };
    response: {
      userId: string;
      displayName: string;
      pictureUrl?: string;
      statusMessage?: string;
    };
  };

  // IDãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼
  idTokenVerification: {
    url: "https://api.line.me/oauth2/v2.1/verify";
    method: "POST";
    body: {
      id_token: string;
      client_id: string;
    };
    response: {
      iss: "https://access.line.me";
      sub: string;                       // ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
      aud: string;                       // Channel ID
      exp: number;
      iat: number;
      nonce?: string;
      name?: string;
      picture?: string;
      email?: string;
    };
  };
}
```

### 4.3 Webhook API

```typescript
interface WebhookApiIntegration {
  // Webhookå—ä¿¡ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  endpoint: {
    url: string;                         // UTAGEå´ã§è‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹URL
    method: "POST";
    authentication: {
      method: "Signature Validation";
      header: "x-line-signature";
      algorithm: "HMAC-SHA256";
      secret: string;                    // Channel Secret
    };
  };

  // Webhookãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£
  webhookRequest: {
    destination: string;                 // ãƒœãƒƒãƒˆã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
    events: Array<{
      type: "message" | "follow" | "unfollow" | "join" | "leave" | "memberJoined" | "memberLeft" | "postback" | "videoPlayComplete" | "beacon" | "accountLink";
      timestamp: number;
      source: {
        type: "user" | "group" | "room";
        userId?: string;
        groupId?: string;
        roomId?: string;
      };
      replyToken: string;
      mode: "active" | "standby";

      // ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—åˆ¥ã®è©³ç´°
      message?: {
        type: "text" | "image" | "video" | "audio" | "file" | "location" | "sticker";
        id: string;
        text?: string;
        // ... ãã®ä»–ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
      };

      follow?: {
        // followã‚¤ãƒ™ãƒ³ãƒˆå›ºæœ‰ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
      };

      postback?: {
        data: string;
        params?: any;
      };
    }>;
  };

  // Webhookå‡¦ç†
  webhookHandling: {
    signatureValidation: {
      algorithm: "HMAC-SHA256";
      steps: [
        "ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã‚’ãƒã‚¤ãƒˆé…åˆ—ã¨ã—ã¦å–å¾—",
        "Channel Secretã‚’ã‚­ãƒ¼ã¨ã—ã¦HMAC-SHA256ã§ãƒãƒƒã‚·ãƒ¥åŒ–",
        "Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰",
        "x-line-signatureãƒ˜ãƒƒãƒ€ãƒ¼ã®å€¤ã¨æ¯”è¼ƒ"
      ];
    };

    eventProcessing: {
      follow: {
        action: "å‹ã ã¡è¿½åŠ æ™‚ã®å‡¦ç†";
        tasks: [
          "ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—",
          "ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«å‹ã ã¡æƒ…å ±ã‚’ä¿å­˜",
          "ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡",
          "ã‚·ãƒŠãƒªã‚ªç™»éŒ²å‡¦ç†"
        ];
      };

      unfollow: {
        action: "ãƒ–ãƒ­ãƒƒã‚¯/å‹ã ã¡å‰Šé™¤æ™‚ã®å‡¦ç†";
        tasks: [
          "å‹ã ã¡çŠ¶æ…‹ã‚’ã€Œãƒ–ãƒ­ãƒƒã‚¯ã€ã«æ›´æ–°",
          "é…ä¿¡ãƒªã‚¹ãƒˆã‹ã‚‰é™¤å¤–"
        ];
      };

      message: {
        action: "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡æ™‚ã®å‡¦ç†";
        tasks: [
          "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…å®¹ã‚’ä¿å­˜",
          "ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰åˆ¤å®š",
          "è‡ªå‹•è¿”ä¿¡å‡¦ç†",
          "ã‚·ãƒŠãƒªã‚ªåˆ†å²å‡¦ç†"
        ];
      };

      postback: {
        action: "ãƒœã‚¿ãƒ³ã‚¿ãƒƒãƒ—ç­‰ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å‡¦ç†";
        tasks: [
          "postbackãƒ‡ãƒ¼ã‚¿è§£æ",
          "ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ",
          "ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡"
        ];
      };
    };
  };
}
```

### 4.4 API ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

```typescript
interface ApiErrorHandling {
  // å…±é€šã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹
  errorResponse: {
    message: string;
    details?: Array<{
      message: string;
      property: string;
    }>;
  };

  // HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰åˆ¥å‡¦ç†
  statusCodeHandling: {
    400: {
      status: "Bad Request";
      cause: "ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¸æ­£";
      action: "ãƒªã‚¯ã‚¨ã‚¹ãƒˆå†…å®¹ã‚’ä¿®æ­£ã—ã¦å†é€";
    };
    401: {
      status: "Unauthorized";
      cause: "èªè¨¼æƒ…å ±ãŒç„¡åŠ¹";
      action: "Channel Access Token / Channel Secretã‚’ç¢ºèª";
    };
    403: {
      status: "Forbidden";
      cause: "æ¨©é™ä¸è¶³";
      action: "APIæ¨©é™è¨­å®šã‚’ç¢ºèª";
    };
    404: {
      status: "Not Found";
      cause: "ãƒªã‚½ãƒ¼ã‚¹ãŒå­˜åœ¨ã—ãªã„";
      action: "ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚„ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ç¢ºèª";
    };
    429: {
      status: "Too Many Requests";
      cause: "ãƒ¬ãƒ¼ãƒˆåˆ¶é™è¶…é";
      action: "ãƒªãƒˆãƒ©ã‚¤é–“éš”ã‚’ç©ºã‘ã¦å†é€ï¼ˆRetry-Afterãƒ˜ãƒƒãƒ€ãƒ¼å‚ç…§ï¼‰";
    };
    500: {
      status: "Internal Server Error";
      cause: "LINEå´ã®ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼";
      action: "æ™‚é–“ã‚’ç©ºã‘ã¦å†é€ã€ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’ä¿å­˜";
    };
  };

  // ãƒªãƒˆãƒ©ã‚¤æˆ¦ç•¥
  retryStrategy: {
    maxRetries: 3;
    backoffStrategy: "exponential";
    initialDelay: 1000;                  // ãƒŸãƒªç§’
    maxDelay: 10000;
    retriableStatusCodes: [429, 500, 502, 503, 504];
  };

  // ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°
  errorLogging: {
    logLevel: "error";
    logFields: {
      timestamp: Date;
      apiEndpoint: string;
      requestId?: string;
      statusCode: number;
      errorMessage: string;
      requestBody?: any;
      responseBody?: any;
      retryCount: number;
    };
  };
}
```

---

## 5. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### 5.1 LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ

```typescript
/**
 * LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±
 */
interface LineOfficialAccount {
  // åŸºæœ¬æƒ…å ±
  accountId: string;                     // UTAGEå†…éƒ¨ç®¡ç†ID
  lineAccountId: string;                 // LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆID
  accountName: string;                   // ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåï¼ˆå…¬é–‹è¡¨ç¤ºåï¼‰

  // äº‹æ¥­è€…æƒ…å ±
  businessInfo: {
    companyName: string;                 // ä¼šç¤¾å/äº‹æ¥­è€…å
    email: string;                       // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
    businessCategory: {
      major: string;                     // å¤§åˆ†é¡
      minor: string;                     // å°åˆ†é¡
    };
  };

  // èªè¨¼æƒ…å ±
  credentials: {
    // Messaging API
    messagingApi: {
      channelId: string;
      channelSecret: string;             // æš—å·åŒ–ä¿å­˜
      channelAccessToken: string;        // æš—å·åŒ–ä¿å­˜
      tokenExpiresAt?: Date;             // ãƒˆãƒ¼ã‚¯ãƒ³æœ‰åŠ¹æœŸé™ï¼ˆé•·æœŸãƒˆãƒ¼ã‚¯ãƒ³ã®å ´åˆã¯nullï¼‰
    };

    // LINE Loginèªè¨¼ï¼ˆæ¨å¥¨ï¼‰
    lineLogin?: {
      channelId: string;
      channelSecret: string;             // æš—å·åŒ–ä¿å­˜
      enabled: boolean;
    };
  };

  // Webhookè¨­å®š
  webhook: {
    webhookUrl: string;                  // è‡ªå‹•ç”ŸæˆURL
    webhookEnabled: boolean;
    verifyToken?: string;
  };

  // ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼æƒ…å ±
  provider: {
    providerId: string;
    providerName: string;                // LINE Developersã®ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åï¼ˆä¸€è‡´å¿…é ˆï¼‰
  };

  // ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status: {
    isActive: boolean;
    connectionStatus: "connected" | "disconnected" | "error";
    lastConnectionCheck: Date;
    errorMessage?: string;
  };

  // ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³æƒ…å ±
  subscription: {
    planType: "Free" | "Light" | "Standard";
    monthlyMessageLimit: number;
    currentMonthUsage: number;
    billingCycle: Date;
  };

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  metadata: {
    createdAt: Date;
    createdBy: string;
    updatedAt: Date;
    updatedBy: string;
    connectedToUtageAt: Date;
  };
}
```

### 5.2 LINEå‹ã ã¡

```typescript
/**
 * LINEå‹ã ã¡æƒ…å ±
 */
interface LineFriend {
  // åŸºæœ¬æƒ…å ±
  friendId: string;                      // UTAGEå†…éƒ¨ç®¡ç†ID
  lineUserId: string;                    // LINEãƒ¦ãƒ¼ã‚¶ãƒ¼ID
  accountId: string;                     // æ‰€å±LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆID

  // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±
  profile: {
    displayName: string;                 // è¡¨ç¤ºå
    pictureUrl?: string;                 // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒURL
    statusMessage?: string;              // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    language?: string;                   // è¨€èªè¨­å®š
  };

  // å‹ã ã¡çŠ¶æ…‹
  friendStatus: {
    status: "active" | "blocked" | "unfollowed";
    followedAt: Date;                    // å‹ã ã¡è¿½åŠ æ—¥æ™‚
    blockedAt?: Date;                    // ãƒ–ãƒ­ãƒƒã‚¯æ—¥æ™‚
    unfollowedAt?: Date;                 // ãƒ•ã‚©ãƒ­ãƒ¼è§£é™¤æ—¥æ™‚
  };

  // ã‚·ãƒŠãƒªã‚ªç™»éŒ²æƒ…å ±
  scenarios: Array<{
    scenarioId: string;
    registeredAt: Date;
    status: "active" | "completed" | "stopped";
    currentStepIndex?: number;
  }>;

  // ãƒ†ã‚¹ãƒˆé€ä¿¡è¨­å®š
  testSettings: {
    isTestDestination: boolean;          // ãƒ†ã‚¹ãƒˆé€ä¿¡å…ˆãƒ•ãƒ©ã‚°
    setAt?: Date;
    setBy?: string;
  };

  // çµ±è¨ˆæƒ…å ±
  statistics: {
    totalMessagesReceived: number;       // å—ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç·æ•°
    totalMessagesSent: number;           // é€ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç·æ•°
    lastMessageReceivedAt?: Date;
    lastMessageSentAt?: Date;
    lastInteractionAt?: Date;
  };

  // ã‚¿ã‚°ãƒ»ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ
  tags: string[];
  segments: string[];

  // ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  customFields: {
    [key: string]: any;
  };

  // èªè¨¼æƒ…å ±ï¼ˆLINEãƒ­ã‚°ã‚¤ãƒ³ä½¿ç”¨æ™‚ï¼‰
  authInfo?: {
    email?: string;
    emailVerified?: boolean;
    linkedAt: Date;
  };

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  metadata: {
    createdAt: Date;
    updatedAt: Date;
    source: "qr_code" | "registration_page" | "manual" | "import";
    registrationUrl?: string;
    referrer?: string;
  };
}
```

### 5.3 LINEãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

```typescript
/**
 * LINEãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æƒ…å ±
 */
interface LineMessage {
  // åŸºæœ¬æƒ…å ±
  messageId: string;                     // UTAGEå†…éƒ¨ç®¡ç†ID
  lineMessageId?: string;                // LINE APIè¿”å´ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ID
  accountId: string;                     // é€ä¿¡å…ƒLINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆID

  // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¿ã‚¤ãƒ—
  messageType: "broadcast" | "step" | "reminder" | "template" | "reply" | "push" | "test";

  // é€ä¿¡æƒ…å ±
  sending: {
    status: "draft" | "scheduled" | "sending" | "sent" | "failed" | "partially_sent";
    scheduledAt?: Date;                  // é…ä¿¡äºˆå®šæ—¥æ™‚
    sentAt?: Date;                       // å®Ÿéš›ã®é€ä¿¡æ—¥æ™‚
    completedAt?: Date;
  };

  // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¦ç´ ï¼ˆæœ€å¤§5å€‹ï¼‰
  elements: Array<{
    elementId: string;
    type: "text" | "image" | "video" | "audio" | "location" | "sticker" | "template";
    order: number;                       // è¡¨ç¤ºé †åºï¼ˆ1-5ï¼‰

    // ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    text?: {
      content: string;
      emojis?: Array<{
        index: number;
        productId: string;
        emojiId: string;
      }>;
    };

    // ç”»åƒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    image?: {
      originalContentUrl: string;
      previewImageUrl: string;
    };

    // å‹•ç”»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    video?: {
      originalContentUrl: string;
      previewImageUrl: string;
    };

    // éŸ³å£°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    audio?: {
      originalContentUrl: string;
      duration: number;                  // ãƒŸãƒªç§’
    };

    // ã‚¹ã‚¿ãƒ³ãƒ—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    sticker?: {
      packageId: string;
      stickerId: string;
    };

    // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    template?: {
      type: "buttons" | "confirm" | "carousel" | "image_carousel";
      // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåˆ¥ã®è©³ç´°ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
      buttons?: {
        thumbnailImageUrl?: string;
        title?: string;
        text: string;
        actions: Array<{
          type: "postback" | "message" | "uri" | "datetimepicker";
          label: string;
          data?: string;
          uri?: string;
        }>;
      };
      carousel?: {
        columns: Array<{
          thumbnailImageUrl?: string;
          title?: string;
          text: string;
          actions: Array<any>;
        }>;
      };
    };
  }>;

  // é€ä¿¡å…ˆæƒ…å ±
  recipients: {
    type: "all" | "segment" | "individual" | "test";

    // ä¸€æ–‰é…ä¿¡ãƒ»ã‚»ã‚°ãƒ¡ãƒ³ãƒˆé…ä¿¡
    targetCount?: number;                // é€ä¿¡å¯¾è±¡æ•°
    sentCount?: number;                  // é€ä¿¡æˆåŠŸæ•°
    failedCount?: number;                // é€ä¿¡å¤±æ•—æ•°

    // å€‹åˆ¥é€ä¿¡
    friendIds?: string[];                // é€ä¿¡å…ˆå‹ã ã¡IDé…åˆ—

    // ãƒ†ã‚¹ãƒˆé€ä¿¡
    testFriendIds?: string[];
  };

  // ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±
  counting: {
    elementCount: number;                // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¦ç´ æ•°ï¼ˆ1-5ï¼‰
    countedAsMessages: number;           // å¸¸ã«1ï¼ˆè¦ç´ æ•°ã«é–¢ã‚ã‚‰ãšï¼‰
    totalCountedMessages: number;        // sentCount Ã— 1
  };

  // ã‚·ãƒŠãƒªã‚ªæƒ…å ±ï¼ˆã‚¹ãƒ†ãƒƒãƒ—ãƒ»ãƒªãƒã‚¤ãƒ³ãƒ€é…ä¿¡ã®å ´åˆï¼‰
  scenario?: {
    scenarioId: string;
    stepIndex?: number;                  // ã‚¹ãƒ†ãƒƒãƒ—é…ä¿¡ã®ã‚¹ãƒ†ãƒƒãƒ—ç•ªå·
    triggerType?: "time_based" | "action_based";
  };

  // é…ä¿¡çµæœ
  deliveryResults?: {
    totalDelivered: number;
    totalRead: number;
    totalClicked: number;
    clickDetails?: Array<{
      linkUrl: string;
      clickCount: number;
    }>;
  };

  // ã‚¨ãƒ©ãƒ¼æƒ…å ±
  errors?: Array<{
    friendId?: string;
    errorCode: string;
    errorMessage: string;
    occurredAt: Date;
  }>;

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  metadata: {
    createdAt: Date;
    createdBy: string;
    updatedAt: Date;
    isTested: boolean;                   // ãƒ†ã‚¹ãƒˆé€ä¿¡å®Ÿæ–½æ¸ˆã¿ãƒ•ãƒ©ã‚°
    testedAt?: Date;
  };
}
```

### 5.4 LINEã‚·ãƒŠãƒªã‚ª

```typescript
/**
 * LINEã‚·ãƒŠãƒªã‚ªæƒ…å ±
 */
interface LineScenario {
  // åŸºæœ¬æƒ…å ±
  scenarioId: string;
  accountId: string;                     // æ‰€å±LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆID
  scenarioName: string;
  description?: string;

  // ã‚·ãƒŠãƒªã‚ªã‚¿ã‚¤ãƒ—
  scenarioType: "step" | "reminder" | "funnel";

  // ç™»éŒ²ãƒšãƒ¼ã‚¸è¨­å®š
  registrationPage: {
    // åŸºæœ¬è¨­å®š
    pageId: string;
    pageUrl: string;
    qrCodeUrl: string;
    qrCodeImageData?: string;            // Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰

    // èªè¨¼æ–¹å¼
    authMethod: "LINEãƒ­ã‚°ã‚¤ãƒ³èªè¨¼" | "ç°¡æ˜“èªè¨¼" | "ç”»åƒèªè¨¼";

    // é‡è¤‡ç™»éŒ²è¨­å®šï¼ˆLINEãƒ­ã‚°ã‚¤ãƒ³èªè¨¼æ™‚ã®ã¿ï¼‰
    duplicateRegistration?: {
      allowed: boolean;
      defaultValue: false;
    };

    // ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
    customScripts: {
      headEnd?: {
        enabled: boolean;
        code: string;
      };
      bodyStart?: {
        enabled: boolean;
        code: string;
      };
      bodyEnd?: {
        enabled: boolean;
        code: string;
      };
    };

    // ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®š
    domain: {
      registrationDomain: string;
      funnelDomain: string;
      mustMatch: true;                   // ä¸€è‡´å¿…é ˆ
    };

    // ãƒšãƒ¼ã‚¸ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
    status: "active" | "inactive";
    publishedAt?: Date;
  };

  // ã‚¹ãƒ†ãƒƒãƒ—è¨­å®šï¼ˆã‚¹ãƒ†ãƒƒãƒ—é…ä¿¡ã®å ´åˆï¼‰
  steps?: Array<{
    stepIndex: number;
    stepName: string;

    // é…ä¿¡ã‚¿ã‚¤ãƒŸãƒ³ã‚°
    triggerType: "time_based" | "action_based";
    delayDays?: number;                  // å‰ã‚¹ãƒ†ãƒƒãƒ—ã‹ã‚‰ã®çµŒéæ—¥æ•°
    delayHours?: number;
    triggerAction?: string;              // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ™ãƒ¼ã‚¹ã®å ´åˆã®ãƒˆãƒªã‚¬ãƒ¼

    // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¨­å®š
    messageId: string;                   // é€ä¿¡ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ID

    // åˆ†å²æ¡ä»¶
    branchConditions?: Array<{
      conditionType: "click" | "reply" | "tag" | "custom_field";
      conditionValue: any;
      nextStepIndex?: number;
      scenarioId?: string;               // åˆ¥ã‚·ãƒŠãƒªã‚ªã¸ã®åˆ†å²
    }>;
  }>;

  // ãƒªãƒã‚¤ãƒ³ãƒ€è¨­å®šï¼ˆãƒªãƒã‚¤ãƒ³ãƒ€é…ä¿¡ã®å ´åˆï¼‰
  reminder?: {
    eventDate: Date;                     // ã‚¤ãƒ™ãƒ³ãƒˆæ—¥
    reminderSchedule: Array<{
      daysBefore: number;                // ã‚¤ãƒ™ãƒ³ãƒˆNæ—¥å‰
      hoursBefore?: number;
      messageId: string;
    }>;
  };

  // çµ±è¨ˆæƒ…å ±
  statistics: {
    totalRegistrations: number;          // ç·ç™»éŒ²è€…æ•°
    activeSubscribers: number;           // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–èª­è€…æ•°
    completedSubscribers: number;        // å®Œäº†èª­è€…æ•°
    unsubscribers: number;               // ç™»éŒ²è§£é™¤æ•°
    totalMessagesSent: number;           // ç·é€ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ•°
    averageEngagementRate: number;       // å¹³å‡ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆç‡
  };

  // ã‚¿ã‚°ãƒ»ã‚»ã‚°ãƒ¡ãƒ³ãƒˆè¨­å®š
  autoTags?: string[];                   // è‡ªå‹•ä»˜ä¸ã‚¿ã‚°
  targetSegments?: string[];             // å¯¾è±¡ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  metadata: {
    createdAt: Date;
    createdBy: string;
    updatedAt: Date;
    updatedBy: string;
    status: "draft" | "active" | "paused" | "archived";
    publishedAt?: Date;
  };
}
```

### 5.5 ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚«ã‚¦ãƒ³ãƒˆå±¥æ­´

```typescript
/**
 * ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€šæ•°ã‚«ã‚¦ãƒ³ãƒˆå±¥æ­´
 */
interface MessageCountHistory {
  // åŸºæœ¬æƒ…å ±
  historyId: string;
  accountId: string;
  period: {
    year: number;
    month: number;
    startDate: Date;
    endDate: Date;
  };

  // ã‚«ã‚¦ãƒ³ãƒˆè©³ç´°
  counts: {
    // é…ä¿¡ã‚¿ã‚¤ãƒ—åˆ¥
    byDistributionType: {
      broadcast: number;                 // ä¸€æ–‰é…ä¿¡
      step: number;                      // ã‚¹ãƒ†ãƒƒãƒ—é…ä¿¡
      reminder: number;                  // ãƒªãƒã‚¤ãƒ³ãƒ€é…ä¿¡
      template: number;                  // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆé…ä¿¡
      reply: number;                     // è¿”ä¿¡
      push: number;                      // ãƒ—ãƒƒã‚·ãƒ¥é€ä¿¡
    };

    // æ—¥åˆ¥
    byDate: Array<{
      date: Date;
      count: number;
      distributionBreakdown: {
        [type: string]: number;
      };
    }>;

    // ç·è¨ˆ
    totalMessages: number;
  };

  // ãƒ—ãƒ©ãƒ³ãƒ»åˆ¶é™æƒ…å ±
  quota: {
    planType: "Free" | "Light" | "Standard";
    monthlyLimit: number;
    remainingMessages: number;
    usagePercentage: number;
    resetDate: Date;
  };

  // è­¦å‘Šãƒ»é€šçŸ¥
  alerts: Array<{
    alertType: "approaching_limit" | "limit_exceeded" | "plan_upgrade_recommended";
    triggeredAt: Date;
    threshold: number;
    currentUsage: number;
    message: string;
  }>;

  // LINEä»•æ§˜ãƒãƒ¼ã‚¸ãƒ§ãƒ³
  specificationVersion: {
    version: string;
    effectiveDate: Date;
    countingRuleChanges?: string;
  };

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  metadata: {
    calculatedAt: Date;
    lastUpdated: Date;
    source: "automated" | "manual_correction";
  };
}
```

### 5.6 QRã‚³ãƒ¼ãƒ‰ç®¡ç†

```typescript
/**
 * LINEç™»éŒ²QRã‚³ãƒ¼ãƒ‰ç®¡ç†
 */
interface QrCodeManagement {
  // åŸºæœ¬æƒ…å ±
  qrCodeId: string;
  scenarioId: string;
  accountId: string;

  // QRã‚³ãƒ¼ãƒ‰ç”»åƒ
  image: {
    url: string;                         // ç”»åƒURL
    base64Data: string;                  // Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿
    format: "PNG" | "SVG";
    size: {
      width: number;
      height: number;
    };
    fileSize: number;                    // ãƒã‚¤ãƒˆ
  };

  // ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰URL
  encodedUrl: {
    fullUrl: string;
    parsedUrl: {
      protocol: string;
      domain: string;
      path: string;
      queryParams: {
        scenarioId: string;
        // rid: string ã¯å«ã¾ã‚Œã¦ã¯ã„ã‘ãªã„ï¼ˆé‡è¦ï¼‰
        [key: string]: string;
      };
    };
  };

  // æ¤œè¨¼æƒ…å ±
  validation: {
    isValidated: boolean;
    validatedAt?: Date;
    validatedBy?: string;

    // ridãƒã‚§ãƒƒã‚¯ï¼ˆæœ€é‡è¦ï¼‰
    ridCheck: {
      passed: boolean;
      hasRid: boolean;
      validationMethod: "manual" | "automated";
    };

    // ãã®ä»–ã®æ¤œè¨¼
    domainCheck: {
      passed: boolean;
      expectedDomain: string;
      actualDomain: string;
    };

    scenarioIdCheck: {
      passed: boolean;
      expectedScenarioId: string;
      actualScenarioId: string;
    };

    overallStatus: "valid" | "invalid" | "warning";
    validationErrors: Array<{
      field: string;
      severity: "critical" | "warning" | "info";
      message: string;
    }>;
  };

  // å–å¾—æƒ…å ±
  retrieval: {
    retrievedAt: Date;
    retrievedBy: string;
    retrievalMethod: "download" | "api" | "screenshot";
    browserMode: "private" | "regular";  // privateå¿…é ˆ
    browserType?: "chrome" | "firefox" | "safari" | "other";
  };

  // ä½¿ç”¨æƒ…å ±
  usage: {
    usageTypes: Array<"å°åˆ·ç‰©" | "SNS" | "ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ" | "ãƒ¡ãƒ¼ãƒ«" | "ãã®ä»–">;
    distributionStartDate?: Date;
    distributionEndDate?: Date;
    estimatedPrintQuantity?: number;
    distributionNotes?: string;
  };

  // çµ±è¨ˆæƒ…å ±
  statistics: {
    totalScans: number;                  // QRã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³å›æ•°
    uniqueScans: number;                 // ãƒ¦ãƒ‹ãƒ¼ã‚¯ã‚¹ã‚­ãƒ£ãƒ³æ•°
    registrationConversionRate: number;  // ç™»éŒ²ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç‡
    scansByDate: Array<{
      date: Date;
      scanCount: number;
      registrationCount: number;
    }>;
    lastScannedAt?: Date;
  };

  // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
  version: {
    versionNumber: number;
    isLatest: boolean;
    previousVersionId?: string;
    reason?: string;                     // å†ç”Ÿæˆç†ç”±
  };

  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
  status: {
    isActive: boolean;
    isDeprecated: boolean;
    deprecatedAt?: Date;
    deprecationReason?: string;
  };

  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
  metadata: {
    createdAt: Date;
    createdBy: string;
    updatedAt: Date;
    notes?: string;
  };
}
```

---

## 6. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶

### 6.1 èªè¨¼æƒ…å ±ã®ä¿è­·

```typescript
interface CredentialSecurity {
  // æš—å·åŒ–
  encryption: {
    algorithm: "AES-256-GCM";
    keyManagement: "AWS KMS" | "HashiCorp Vault" | "equivalent";

    encryptedFields: [
      "channelSecret",                   // Messaging API Channel Secret
      "channelAccessToken",              // Channel Access Token
      "lineLoginChannelSecret"           // LINE Login Channel Secret
    ];
  };

  // ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
  accessControl: {
    readPermission: ["admin", "developer", "system"];
    writePermission: ["admin", "system"];

    auditLog: {
      logCredentialAccess: true;
      logFields: {
        timestamp: Date;
        userId: string;
        action: "read" | "write" | "delete";
        fieldAccessed: string;
        ipAddress: string;
        userAgent: string;
      };
    };
  };

  // èªè¨¼æƒ…å ±ã®ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
  rotation: {
    channelAccessToken: {
      rotationPolicy: "manual" | "automatic";
      recommendedInterval: "yearly";
      expirationWarningDays: 30;
    };

    channelSecret: {
      rotationPolicy: "manual";
      recommendedInterval: "as_needed";
    };
  };

  // ç’°å¢ƒå¤‰æ•°ç®¡ç†
  environmentVariables: {
    storageMethod: "encrypted_config" | "secrets_manager";
    neverCommitToVcs: true;

    requiredVariables: [
      "LINE_MESSAGING_CHANNEL_ID",
      "LINE_MESSAGING_CHANNEL_SECRET",
      "LINE_MESSAGING_CHANNEL_ACCESS_TOKEN",
      "LINE_LOGIN_CHANNEL_ID",
      "LINE_LOGIN_CHANNEL_SECRET"
    ];
  };
}
```

### 6.2 Webhook ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

```typescript
interface WebhookSecurity {
  // ç½²åæ¤œè¨¼
  signatureValidation: {
    enabled: true;
    algorithm: "HMAC-SHA256";
    header: "x-line-signature";
    secret: string;                      // Channel Secret

    validationSteps: [
      "ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã‚’æ–‡å­—åˆ—ã¨ã—ã¦å–å¾—",
      "Channel Secretã‚’éµã¨ã—ã¦HMAC-SHA256ãƒãƒƒã‚·ãƒ¥ã‚’ç”Ÿæˆ",
      "Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰",
      "x-line-signatureãƒ˜ãƒƒãƒ€ãƒ¼ã¨æ¯”è¼ƒ",
      "ä¸€è‡´ã—ãªã„å ´åˆã¯401 Unauthorizedã‚’è¿”ã™"
    ];

    rejectInvalidSignature: true;
  };

  // IPãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆ
  ipWhitelist: {
    enabled: boolean;
    allowedIpRanges: string[];           // LINEå…¬å¼ã®IPãƒ¬ãƒ³ã‚¸
    updateFrequency: "monthly";
    source: "https://developers.line.biz/en/reference/messaging-api/#ip-addresses";
  };

  // ãƒ¬ãƒ¼ãƒˆåˆ¶é™
  rateLimit: {
    enabled: true;
    maxRequestsPerMinute: 1000;
    maxRequestsPerHour: 10000;
    blockDuration: 3600;                 // ç§’

    exceedanceAction: "reject" | "queue";
  };

  // ãƒªãƒ—ãƒ¬ã‚¤ã‚¢ã‚¿ãƒƒã‚¯å¯¾ç­–
  replayProtection: {
    enabled: true;
    timestampValidation: {
      maxAgeSeconds: 300;                // 5åˆ†ä»¥å†…ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã¿å—ä»˜
      checkTimestampField: "timestamp";
    };

    nonceTracking: {
      enabled: true;
      storeDuration: 600;                // 10åˆ†é–“nonceã‚’ä¿æŒ
      rejectDuplicateNonce: true;
    };
  };

  // HTTPSå¼·åˆ¶
  httpsEnforcement: {
    enabled: true;
    redirectHttp: false;                 // HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã›ãšæ‹’å¦
    hstsEnabled: true;
    hstsMaxAge: 31536000;                // 1å¹´
  };
}
```

### 6.3 ãƒ‡ãƒ¼ã‚¿ä¿è­·

```typescript
interface DataProtection {
  // å€‹äººæƒ…å ±ä¿è­·
  personalDataProtection: {
    // PIIï¼ˆå€‹äººè­˜åˆ¥æƒ…å ±ï¼‰ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
    piiFields: [
      "lineUserId",
      "displayName",
      "email",
      "pictureUrl"
    ];

    // ãƒ‡ãƒ¼ã‚¿æœ€å°åŒ–
    dataMinimization: {
      collectOnlyNecessary: true;
      retentionPolicy: {
        activeUsers: "unlimited";
        inactiveUsers: "2_years";        // 2å¹´é–“éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã§å‰Šé™¤æ¤œè¨
        unfollowedUsers: "1_year";       // ãƒ•ã‚©ãƒ­ãƒ¼è§£é™¤å¾Œ1å¹´ã§å‰Šé™¤
      };
    };

    // ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°
    accessLogging: {
      logPiiAccess: true;
      logRetentionDays: 90;
      includeFields: {
        timestamp: Date;
        userId: string;
        action: string;
        recordId: string;
        ipAddress: string;
      };
    };
  };

  // ãƒ‡ãƒ¼ã‚¿æš—å·åŒ–
  dataEncryption: {
    atRest: {
      enabled: true;
      algorithm: "AES-256";
      encryptedTables: [
        "line_official_accounts",
        "line_friends",
        "line_messages"
      ];
    };

    inTransit: {
      enabled: true;
      protocol: "TLS 1.3";
      minimumVersion: "TLS 1.2";
    };
  };

  // ãƒ‡ãƒ¼ã‚¿å‰Šé™¤
  dataDeletion: {
    // ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æ±‚ã«ã‚ˆã‚‹å‰Šé™¤ï¼ˆGDPRå¯¾å¿œï¼‰
    userRequestedDeletion: {
      responseTime: "30_days";
      deletionScope: "all_personal_data";
      confirmationRequired: true;
    };

    // è‡ªå‹•å‰Šé™¤
    automaticDeletion: {
      unfollowedUsers: {
        enabled: true;
        afterDays: 365;                  // 1å¹´å¾Œ
        notifyBefore: 30;                // 30æ—¥å‰ã«é€šçŸ¥
      };

      messageHistory: {
        enabled: false;                  // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´ã¯ä¿æŒ
        afterDays?: number;
      };
    };
  };

  // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
  backup: {
    enabled: true;
    frequency: "daily";
    retention: {
      dailyBackups: 7;
      weeklyBackups: 4;
      monthlyBackups: 12;
    };
    encryption: true;
    offSiteStorage: true;
  };
}
```

---

## 7. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶

### 7.1 å¿œç­”æ™‚é–“

```typescript
interface PerformanceRequirements {
  // APIå¿œç­”æ™‚é–“
  apiResponseTime: {
    messageSending: {
      p50: "< 500ms";
      p95: "< 1000ms";
      p99: "< 2000ms";
    };

    webhookProcessing: {
      p50: "< 200ms";
      p95: "< 500ms";
      p99: "< 1000ms";
    };

    profileFetch: {
      p50: "< 300ms";
      p95: "< 800ms";
      p99: "< 1500ms";
    };
  };

  // UIå¿œç­”æ™‚é–“
  uiResponseTime: {
    pageLoad: {
      registrationPage: "< 2s";
      settingsPage: "< 1.5s";
      friendsList: "< 2s";
    };

    formSubmission: {
      accountConnection: "< 3s";
      messageCreation: "< 2s";
      settingsUpdate: "< 1s";
    };
  };

  // ãƒãƒƒãƒå‡¦ç†
  batchProcessing: {
    broadcastDistribution: {
      recipients1000: "< 5min";
      recipients10000: "< 30min";
      recipients100000: "< 3hours";
    };

    messageCountCalculation: {
      monthly: "< 5min";
      realtime: "< 10s";
    };
  };
}
```

### 7.2 ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆ

```typescript
interface ThroughputRequirements {
  // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡
  messageSending: {
    maxMessagesPerSecond: 100;           // LINE APIåˆ¶é™ã«æº–æ‹ 
    maxBroadcastPerHour: 500;            // ãƒ—ãƒ©ãƒ³ã«ã‚ˆã‚‹

    queueing: {
      enabled: true;
      maxQueueSize: 100000;
      processingStrategy: "FIFO";
    };
  };

  // Webhookå‡¦ç†
  webhookProcessing: {
    maxEventsPerSecond: 1000;
    concurrentWorkers: 10;

    backpressure: {
      enabled: true;
      maxQueueSize: 10000;
      rejectWhenFull: false;             // ã‚­ãƒ¥ãƒ¼ã‚¤ãƒ³ã‚°
    };
  };

  // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒª
  databaseQueries: {
    maxQueriesPerSecond: 500;
    connectionPoolSize: 20;
    maxQueryTime: "5s";

    indexing: {
      required: true;
      indexes: [
        "line_friends.lineUserId",
        "line_friends.accountId",
        "line_messages.sentAt",
        "line_scenarios.scenarioId"
      ];
    };
  };
}
```

---

## 8. ç›£è¦–ãƒ»ãƒ­ã‚°è¦ä»¶

### 8.1 ç›£è¦–é …ç›®

```typescript
interface MonitoringRequirements {
  // ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹
  systemMetrics: {
    apiHealth: {
      endpoint: "/health/line-api";
      checkInterval: "1min";
      metrics: [
        "api_availability",
        "api_response_time",
        "api_error_rate"
      ];
    };

    messageDelivery: {
      metrics: [
        "messages_sent_total",
        "messages_failed_total",
        "delivery_success_rate",
        "delivery_latency"
      ];
      alertThresholds: {
        successRateBelow: 95;            // 95%æœªæº€ã§è­¦å‘Š
        errorRateAbove: 5;               // 5%è¶…éã§è­¦å‘Š
      };
    };

    webhookProcessing: {
      metrics: [
        "webhook_events_received",
        "webhook_processing_time",
        "webhook_errors",
        "queue_depth"
      ];
      alertThresholds: {
        queueDepthAbove: 1000;
        processingTimeAbove: 2000;       // ãƒŸãƒªç§’
      };
    };
  };

  // ãƒ“ã‚¸ãƒã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹
  businessMetrics: {
    userEngagement: {
      metrics: [
        "new_friends_today",
        "unfollows_today",
        "message_open_rate",
        "link_click_rate"
      ];
      reportingInterval: "daily";
    };

    messageUsage: {
      metrics: [
        "monthly_message_count",
        "quota_usage_percentage",
        "approaching_limit_alert"
      ];
      alertThresholds: {
        quotaUsageAbove: 80;             // 80%è¶…éã§è­¦å‘Š
        quotaUsageAbove90: 90;           // 90%è¶…éã§ç·Šæ€¥è­¦å‘Š
      };
    };
  };

  // ã‚¨ãƒ©ãƒ¼ç›£è¦–
  errorMonitoring: {
    apiErrors: {
      track: [
        "401_unauthorized",
        "403_forbidden",
        "429_rate_limit",
        "500_server_error"
      ];
      alertOn: ["401", "403", "429"];
    };

    applicationErrors: {
      track: [
        "message_send_failure",
        "webhook_processing_error",
        "database_connection_error",
        "validation_error"
      ];
      severity: ["critical", "error", "warning"];
    };
  };
}
```

### 8.2 ãƒ­ã‚°è¦ä»¶

```typescript
interface LoggingRequirements {
  // ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«
  logLevels: {
    production: "info";
    staging: "debug";
    development: "trace";
  };

  // ãƒ­ã‚°ã‚«ãƒ†ã‚´ãƒª
  logCategories: {
    // APIé€šä¿¡ãƒ­ã‚°
    apiLogs: {
      level: "info";
      include: {
        timestamp: Date;
        requestId: string;
        method: string;
        endpoint: string;
        statusCode: number;
        responseTime: number;
        userId?: string;
        accountId?: string;
      };
      excludeSensitiveData: [
        "channelSecret",
        "channelAccessToken",
        "authorization"
      ];
    };

    // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ãƒ­ã‚°
    messageLogs: {
      level: "info";
      include: {
        timestamp: Date;
        messageId: string;
        accountId: string;
        messageType: string;
        recipientCount: number;
        deliveryStatus: string;
        errorDetails?: any;
      };
    };

    // Webhookã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚°
    webhookLogs: {
      level: "debug";
      include: {
        timestamp: Date;
        eventType: string;
        userId?: string;
        sourceType: string;
        replyToken?: string;
        processed: boolean;
        processingTime: number;
      };
    };

    // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ­ã‚°
    securityLogs: {
      level: "warning";
      include: {
        timestamp: Date;
        eventType: "invalid_signature" | "rate_limit_exceeded" | "unauthorized_access";
        ipAddress: string;
        userAgent: string;
        requestDetails: any;
      };
      retention: "1_year";
    };

    // ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°
    errorLogs: {
      level: "error";
      include: {
        timestamp: Date;
        errorType: string;
        errorMessage: string;
        stackTrace: string;
        context: any;
        userId?: string;
        accountId?: string;
      };
      retention: "6_months";
    };
  };

  // ãƒ­ã‚°ä¿å­˜
  logStorage: {
    provider: "CloudWatch" | "Elasticsearch" | "Splunk";
    retention: {
      info: "30_days";
      warning: "90_days";
      error: "180_days";
      security: "1_year";
    };

    indexing: {
      enabled: true;
      indexFields: [
        "timestamp",
        "level",
        "userId",
        "accountId",
        "requestId"
      ];
    };
  };
}
```

---

## 9. ãƒ†ã‚¹ãƒˆè¦ä»¶

### 9.1 å˜ä½“ãƒ†ã‚¹ãƒˆ

```typescript
interface UnitTestRequirements {
  coverage: {
    minimum: 80;                         // æœ€ä½80%ã‚«ãƒãƒ¬ãƒƒã‚¸
    target: 90;                          // ç›®æ¨™90%
  };

  testScenarios: {
    // èªè¨¼æƒ…å ±æ¤œè¨¼
    credentialValidation: [
      "æœ‰åŠ¹ãªChannel IDãƒ»Secretã§ã®é€£æºæˆåŠŸ",
      "ç„¡åŠ¹ãªChannel IDã§ã®é€£æºå¤±æ•—",
      "ç„¡åŠ¹ãªChannel Secretã§ã®é€£æºå¤±æ•—",
      "Messaging APIã¨LINEãƒ­ã‚°ã‚¤ãƒ³ã§åŒã˜Channel IDã®å ´åˆã®ã‚¨ãƒ©ãƒ¼",
      "4ã¤ã®èªè¨¼æƒ…å ±ã®ä¸€æ„æ€§æ¤œè¨¼"
    ];

    // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚«ã‚¦ãƒ³ãƒˆãƒ­ã‚¸ãƒƒã‚¯
    messageCountLogic: [
      "1è¦ç´ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ = 1é€šã‚«ã‚¦ãƒ³ãƒˆ",
      "5è¦ç´ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ = 1é€šã‚«ã‚¦ãƒ³ãƒˆ",
      "è¤‡æ•°å—ä¿¡è€…ã¸ã®é€ä¿¡ã‚«ã‚¦ãƒ³ãƒˆè¨ˆç®—",
      "é…ä¿¡ã‚¿ã‚¤ãƒ—åˆ¥ã‚«ã‚¦ãƒ³ãƒˆ"
    ];

    // QRã‚³ãƒ¼ãƒ‰æ¤œè¨¼
    qrCodeValidation: [
      "ridãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãªã—ã®QRã‚³ãƒ¼ãƒ‰ = æœ‰åŠ¹",
      "ridãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚ã‚Šã®QRã‚³ãƒ¼ãƒ‰ = ç„¡åŠ¹",
      "ä¸æ­£ãªURLå½¢å¼ã®QRã‚³ãƒ¼ãƒ‰ = ã‚¨ãƒ©ãƒ¼"
    ];

    // Webhookç½²åæ¤œè¨¼
    webhookSignatureValidation: [
      "æ­£ã—ã„ç½²åã§ã®æ¤œè¨¼æˆåŠŸ",
      "ä¸æ­£ãªç½²åã§ã®æ¤œè¨¼å¤±æ•—",
      "ç½²åãªã—ã§ã®æ¤œè¨¼å¤±æ•—"
    ];
  };
}
```

### 9.2 çµ±åˆãƒ†ã‚¹ãƒˆ

```typescript
interface IntegrationTestRequirements {
  testScenarios: {
    // LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé€£æºãƒ•ãƒ­ãƒ¼
    accountIntegration: [
      "Messaging APIèªè¨¼æƒ…å ±å…¥åŠ› â†’ é€£æºæˆåŠŸ",
      "LINEãƒ­ã‚°ã‚¤ãƒ³èªè¨¼æƒ…å ±è¿½åŠ  â†’ èªè¨¼æ–¹å¼åˆ‡æ›¿",
      "Webhook URLè‡ªå‹•ç”Ÿæˆç¢ºèª",
      "ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åä¸€è‡´æ¤œè¨¼"
    ];

    // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ãƒ•ãƒ­ãƒ¼
    messageSending: [
      "ãƒ†ã‚¹ãƒˆé€ä¿¡ â†’ æŒ‡å®šå‹ã ã¡ã¸ã®é…ä¿¡ç¢ºèª",
      "ä¸€æ–‰é…ä¿¡ â†’ å…¨å‹ã ã¡ã¸ã®é…ä¿¡ç¢ºèª",
      "ã‚¹ãƒ†ãƒƒãƒ—é…ä¿¡ â†’ ã‚¿ã‚¤ãƒŸãƒ³ã‚°é€šã‚Šã®é…ä¿¡ç¢ºèª",
      "é€ä¿¡å¤±æ•—æ™‚ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°"
    ];

    // Webhookã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†ãƒ•ãƒ­ãƒ¼
    webhookProcessing: [
      "å‹ã ã¡è¿½åŠ ã‚¤ãƒ™ãƒ³ãƒˆ â†’ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç™»éŒ²",
      "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡ã‚¤ãƒ™ãƒ³ãƒˆ â†’ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¿å­˜",
      "ãƒ–ãƒ­ãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ â†’ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°",
      "postbackã‚¤ãƒ™ãƒ³ãƒˆ â†’ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ"
    ];

    // ç™»éŒ²ãƒšãƒ¼ã‚¸ãƒ•ãƒ­ãƒ¼
    registrationPage: [
      "QRã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³ â†’ å‹ã ã¡è¿½åŠ  â†’ ã‚·ãƒŠãƒªã‚ªç™»éŒ²",
      "URLã‚¯ãƒªãƒƒã‚¯ â†’ å‹ã ã¡è¿½åŠ  â†’ ã‚·ãƒŠãƒªã‚ªç™»éŒ²",
      "é‡è¤‡ç™»éŒ²è¨­å®šã®å‹•ä½œç¢ºèªï¼ˆè¨±å¯/ä¸è¨±å¯ï¼‰"
    ];
  };
}
```

### 9.3 E2Eãƒ†ã‚¹ãƒˆ

```typescript
interface E2eTestRequirements {
  testScenarios: {
    // æ–°è¦ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆã‹ã‚‰é…ä¿¡ã¾ã§
    fullFlow: [
      "LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ",
      "UTAGEé€£æºè¨­å®š",
      "ã‚·ãƒŠãƒªã‚ªä½œæˆ",
      "ç™»éŒ²ãƒšãƒ¼ã‚¸ç”Ÿæˆ",
      "QRã‚³ãƒ¼ãƒ‰å–å¾—ãƒ»æ¤œè¨¼",
      "ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²",
      "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä½œæˆ",
      "ãƒ†ã‚¹ãƒˆé€ä¿¡",
      "æœ¬é…ä¿¡",
      "é…ä¿¡çµæœç¢ºèª"
    ];

    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼
    userJourney: [
      "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒQRã‚³ãƒ¼ãƒ‰ã‚’ã‚¹ã‚­ãƒ£ãƒ³",
      "LINEã‚¢ãƒ—ãƒªã§å‹ã ã¡è¿½åŠ ",
      "ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡",
      "ã‚¹ãƒ†ãƒƒãƒ—é…ä¿¡å—ä¿¡ï¼ˆè¤‡æ•°ã‚¹ãƒ†ãƒƒãƒ—ï¼‰",
      "ãƒœã‚¿ãƒ³ã‚¿ãƒƒãƒ— â†’ postbackã‚¤ãƒ™ãƒ³ãƒˆ",
      "åˆ†å²ã‚·ãƒŠãƒªã‚ªã¸ã®ç§»å‹•",
      "ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡"
    ];
  };

  // ãƒ†ã‚¹ãƒˆç’°å¢ƒ
  testEnvironment: {
    lineSandbox: {
      useSandboxApi: true;
      sandboxFriends: 50;                // ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ç’°å¢ƒã®å‹ã ã¡ä¸Šé™
    };

    testAccounts: {
      minimumRequired: 10;
      testScenarios: [
        "æ–°è¦å‹ã ã¡è¿½åŠ ",
        "æ—¢å­˜å‹ã ã¡",
        "ãƒ–ãƒ­ãƒƒã‚¯æ¸ˆã¿å‹ã ã¡",
        "å†å‹ã ã¡è¿½åŠ "
      ];
    };
  };
}
```

---

## 10. é‹ç”¨è¦ä»¶

### 10.1 ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

```typescript
interface DeploymentRequirements {
  // ãƒ‡ãƒ—ãƒ­ã‚¤æˆ¦ç•¥
  deploymentStrategy: {
    type: "blue-green" | "canary" | "rolling";
    rollbackCapability: true;
    rollbackTimeTarget: "< 5min";
  };

  // ç’°å¢ƒåˆ†é›¢
  environments: {
    development: {
      lineApiMode: "sandbox";
      databaseIsolation: true;
    };

    staging: {
      lineApiMode: "production";         // æœ¬ç•ªAPIä½¿ç”¨ï¼ˆãƒ†ã‚¹ãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼‰
      databaseIsolation: true;
      smokeTestsRequired: true;
    };

    production: {
      lineApiMode: "production";
      databaseIsolation: true;
      approvalRequired: true;
      rolloutStrategy: "canary";
    };
  };

  // ãƒ‡ãƒ—ãƒ­ã‚¤ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
  preDeploymentChecks: [
    "èªè¨¼æƒ…å ±ã®ç’°å¢ƒå¤‰æ•°è¨­å®šç¢ºèª",
    "Webhook URLè¨­å®šç¢ºèª",
    "ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†",
    "ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®è„†å¼±æ€§ãƒã‚§ãƒƒã‚¯",
    "å˜ä½“ãƒ†ã‚¹ãƒˆãƒ»çµ±åˆãƒ†ã‚¹ãƒˆãƒ‘ã‚¹ç¢ºèª"
  ];

  postDeploymentChecks: [
    "ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆç¢ºèª",
    "Webhookæ¥ç¶šç¢ºèª",
    "ãƒ†ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡æˆåŠŸ",
    "ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†ç¢ºèª",
    "ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç›£è¦–é–‹å§‹"
  ];
}
```

### 10.2 ä¿å®ˆé‹ç”¨

```typescript
interface MaintenanceRequirements {
  // å®šæœŸãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹
  scheduledMaintenance: {
    // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–
    databaseOptimization: {
      frequency: "weekly";
      tasks: [
        "ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹å†æ§‹ç¯‰",
        "ä¸è¦ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—",
        "çµ±è¨ˆæƒ…å ±æ›´æ–°"
      ];
      maintenanceWindow: "æ—¥æ›œæ—¥ 03:00-05:00 JST";
    };

    // ãƒ­ã‚°ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
    logRotation: {
      frequency: "daily";
      retention: "30_days";
      compression: true;
    };

    // èªè¨¼æƒ…å ±ç¢ºèª
    credentialReview: {
      frequency: "quarterly";
      tasks: [
        "Channel Access Tokenæœ‰åŠ¹æœŸé™ç¢ºèª",
        "æœªä½¿ç”¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤",
        "æ¨©é™è¨­å®šãƒ¬ãƒ“ãƒ¥ãƒ¼"
      ];
    };
  };

  // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
  backup: {
    database: {
      frequency: "daily";
      time: "02:00 JST";
      retention: {
        daily: 7;
        weekly: 4;
        monthly: 12;
      };
      verification: "weekly";
    };

    configuration: {
      frequency: "on_change";
      versionControl: true;
      includeSecrets: false;             // èªè¨¼æƒ…å ±ã¯åˆ¥ç®¡ç†
    };
  };

  // ç½å®³å¾©æ—§
  disasterRecovery: {
    rto: "4_hours";                      // ç›®æ¨™å¾©æ—§æ™‚é–“
    rpo: "1_hour";                       // ç›®æ¨™å¾©æ—§æ™‚ç‚¹

    recoveryProcedure: [
      "æœ€æ–°ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©å…ƒ",
      "èªè¨¼æƒ…å ±ã®å†è¨­å®š",
      "Webhook URLã®å†è¨­å®š",
      "æ¥ç¶šãƒ†ã‚¹ãƒˆå®Ÿæ–½",
      "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é…ä¿¡æ©Ÿèƒ½ç¢ºèª",
      "ã‚µãƒ¼ãƒ“ã‚¹å†é–‹"
    ];

    drillFrequency: "quarterly";         // å››åŠæœŸã”ã¨ã«è¨“ç·´
  };
}
```

---

## 11. ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹è¦ä»¶

### 11.1 LINEè¦ç´„æº–æ‹ 

```typescript
interface LineComplianceRequirements {
  // åˆ©ç”¨è¦ç´„éµå®ˆ
  termsCompliance: {
    requiredReview: [
      "LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåˆ©ç”¨è¦ç´„",
      "LINE Developersåˆ©ç”¨è¦ç´„",
      "Messaging APIåˆ©ç”¨è¦ç´„",
      "LINEãƒ­ã‚°ã‚¤ãƒ³åˆ©ç”¨è¦ç´„"
    ];

    prohibitedPractices: [
      "ã‚¹ãƒ‘ãƒ é…ä¿¡",
      "ç¬¬ä¸‰è€…ã¸ã®èªè¨¼æƒ…å ±å…±æœ‰",
      "åˆ©ç”¨ç›®çš„å¤–ã®å€‹äººæƒ…å ±å–å¾—",
      "æœªæ‰¿è«¾ã®åºƒå‘Šé…ä¿¡",
      "è©æ¬ºçš„ãªå†…å®¹ã®é…ä¿¡"
    ];

    complianceCheck: {
      frequency: "before_each_campaign";
      reviewer: "compliance_officer";
    };
  };

  // ãƒ‡ãƒ¼ã‚¿å–æ‰±ã„
  dataHandling: {
    // LINEåˆ©ç”¨è¦ç´„ã§å®šã‚ã‚‰ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ä¿è­·
    userDataProtection: [
      "ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã®é©åˆ‡ãªç®¡ç†",
      "ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã®æœ€å°é™å–å¾—",
      "ç¬¬ä¸‰è€…æä¾›ã®ç¦æ­¢ï¼ˆè¦ç´„ã§è¨±å¯ã•ã‚ŒãŸå ´åˆã‚’é™¤ãï¼‰",
      "ãƒ‡ãƒ¼ã‚¿æ¼æ´©é˜²æ­¢æªç½®"
    ];

    // ãƒ‡ãƒ¼ã‚¿å‰Šé™¤ç¾©å‹™
    dataDeletionObligation: {
      userRequest: "30_days";            // ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æ±‚ã‹ã‚‰30æ—¥ä»¥å†…
      accountClosure: "immediate";       // ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé–‰é–æ™‚ã¯å³åº§
      serviceTermination: "60_days";     // ã‚µãƒ¼ãƒ“ã‚¹çµ‚äº†æ™‚ã¯60æ—¥ä»¥å†…
    };
  };
}
```

### 11.2 å€‹äººæƒ…å ±ä¿è­·æ³•å¯¾å¿œ

```typescript
interface PersonalInformationProtectionRequirements {
  // å–å¾—ãƒ»åˆ©ç”¨
  acquisition: {
    purposeNotification: {
      required: true;
      displayLocation: "ç™»éŒ²ãƒšãƒ¼ã‚¸ã€ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼";
      content: "LINEé…ä¿¡ã€ã‚·ãƒŠãƒªã‚ªç®¡ç†ã€çµ±è¨ˆåˆ†æ";
    };

    consentObtainment: {
      required: true;
      explicitConsent: true;
      method: "ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹åŒæ„ã€å‹ã ã¡è¿½åŠ æ™‚ã®æ˜ç¤º";
    };
  };

  // å®‰å…¨ç®¡ç†æªç½®
  securityMeasures: {
    organizational: [
      "å€‹äººæƒ…å ±ä¿è­·è²¬ä»»è€…ã®è¨­ç½®",
      "å¾“æ¥­å“¡ã¸ã®æ•™è‚²ãƒ»è¨“ç·´",
      "ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ç®¡ç†"
    ];

    technical: [
      "ãƒ‡ãƒ¼ã‚¿æš—å·åŒ–",
      "ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°è¨˜éŒ²",
      "ä¸æ­£ã‚¢ã‚¯ã‚»ã‚¹æ¤œçŸ¥",
      "è„†å¼±æ€§ç®¡ç†"
    ];

    physical: [
      "ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ³ã‚¿ãƒ¼ã¸ã®å…¥é€€å®¤ç®¡ç†",
      "æ©Ÿå™¨ã®æŒã¡å‡ºã—åˆ¶é™"
    ];
  };

  // é–‹ç¤ºãƒ»è¨‚æ­£ãƒ»å‰Šé™¤
  userRights: {
    disclosureRequest: {
      responseTime: "2_weeks";
      method: "é›»å­ãƒ•ã‚¡ã‚¤ãƒ«ã¾ãŸã¯æ›¸é¢";
    };

    correctionRequest: {
      responseTime: "2_weeks";
      verification: "æœ¬äººç¢ºèªå¿…é ˆ";
    };

    deletionRequest: {
      responseTime: "30_days";
      scope: "å…¨å€‹äººãƒ‡ãƒ¼ã‚¿";
      exceptions: "æ³•ä»¤ã§ä¿å­˜ç¾©å‹™ãŒã‚ã‚‹ãƒ‡ãƒ¼ã‚¿";
    };
  };
}
```

---

## 12. ä»Šå¾Œã®æ‹¡å¼µæ€§

### 12.1 å°†æ¥çš„ãªæ©Ÿèƒ½æ‹¡å¼µ

```typescript
interface FutureEnhancements {
  // é«˜åº¦ãªã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
  advancedSegmentation: {
    behaviorBasedSegments: {
      description: "ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡Œå‹•ã«åŸºã¥ãå‹•çš„ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ";
      criteria: [
        "é–‹å°ç‡",
        "ã‚¯ãƒªãƒƒã‚¯ç‡",
        "å¿œç­”ç‡",
        "è³¼å…¥å±¥æ­´"
      ];
    };

    aiPoweredSegmentation: {
      description: "AI/MLã«ã‚ˆã‚‹è‡ªå‹•ã‚»ã‚°ãƒ¡ãƒ³ãƒˆç”Ÿæˆ";
      features: [
        "é¡ä¼¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™ºè¦‹",
        "é›¢è„±äºˆæ¸¬",
        "ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆäºˆæ¸¬"
      ];
    };
  };

  // ãƒªãƒƒãƒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  richMessages: {
    flexMessage: {
      description: "é«˜åº¦ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸";
      features: [
        "ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã‚¨ãƒ‡ã‚£ã‚¿",
        "ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª",
        "ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³"
      ];
    };

    richMenu: {
      description: "LINEãƒˆãƒ¼ã‚¯ç”»é¢ä¸‹éƒ¨ã®ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼";
      features: [
        "ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼",
        "æ¡ä»¶åˆ†å²è¡¨ç¤º",
        "A/Bãƒ†ã‚¹ãƒˆ"
      ];
    };
  };

  // ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ
  chatbot: {
    aiChatbot: {
      description: "AIè‡ªå‹•å¿œç­”ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆ";
      features: [
        "è‡ªç„¶è¨€èªå‡¦ç†",
        "FAQè‡ªå‹•å¿œç­”",
        "æœ‰äººãƒãƒ£ãƒƒãƒˆåˆ‡æ›¿"
      ];
    };

    scenarioBot: {
      description: "ã‚·ãƒŠãƒªã‚ªãƒ™ãƒ¼ã‚¹ã®è‡ªå‹•å¿œç­”";
      features: [
        "ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒˆãƒªã‚¬ãƒ¼",
        "æ¡ä»¶åˆ†å²",
        "å¤‰æ•°ç®¡ç†"
      ];
    };
  };

  // ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹
  analytics: {
    advancedReporting: {
      description: "é«˜åº¦ãªåˆ†æãƒ¬ãƒãƒ¼ãƒˆ";
      features: [
        "ã‚³ãƒ›ãƒ¼ãƒˆåˆ†æ",
        "ãƒ•ã‚¡ãƒãƒ«åˆ†æ",
        "LTVè¨ˆç®—"
      ];
    };

    realTimeAnalytics: {
      description: "ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰";
      features: [
        "é…ä¿¡çŠ¶æ³ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º",
        "ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆæ¨ç§»",
        "ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š"
      ];
    };
  };
}
```

---

## 13. å‚è€ƒæƒ…å ±

### 13.1 é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

```typescript
interface ReferenceDocuments {
  // LINEå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
  lineOfficialDocs: {
    messagingApi: "https://developers.line.biz/ja/docs/messaging-api/";
    lineLogin: "https://developers.line.biz/ja/docs/line-login/";
    webhook: "https://developers.line.biz/ja/reference/messaging-api/#webhook";
  };

  // UTAGEå…¬å¼ãƒãƒ‹ãƒ¥ã‚¢ãƒ«
  utageManual: {
    lineBasicSetup: [
      "https://help.utage-system.com/archives/3088",   // LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
      "https://help.utage-system.com/archives/1820",   // é€£æºæ–¹æ³•
      "https://help.utage-system.com/archives/8653",   // Adminæ¨©é™ä»˜ä¸
      "https://help.utage-system.com/archives/11657",  // é€šæ•°ã‚«ã‚¦ãƒ³ãƒˆ
      "https://help.utage-system.com/archives/13090",  // ãƒ†ã‚¹ãƒˆé€ä¿¡å…ˆè¨­å®š
      "https://help.utage-system.com/archives/7106",   // ç™»éŒ²ãƒšãƒ¼ã‚¸è¨­å®š
      "https://help.utage-system.com/archives/6014",   // URLå–å¾—
      "https://help.utage-system.com/archives/11189"   // QRã‚³ãƒ¼ãƒ‰å–å¾—
    ];
  };

  // ãã®ä»–å‚è€ƒè³‡æ–™
  additionalResources: {
    qrCodeValidator: "https://tool-taro.com";          // QRã‚³ãƒ¼ãƒ‰æ¤œè¨¼ãƒ„ãƒ¼ãƒ«
    lineDevelopers: "https://developers.line.biz/ja/"; // LINE Developers
    lineBusinessPortal: "https://www.linebiz.com/";    // LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²
  };
}
```

### 13.2 ç”¨èªé›†

```typescript
interface Glossary {
  terms: {
    "LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ": "ä¼æ¥­ã‚„åº—èˆ—ãŒLINEä¸Šã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å–ã‚‹ãŸã‚ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ",
    "Messaging API": "LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ã‚„Webhookå—ä¿¡ã‚’è¡Œã†ãŸã‚ã®API",
    "LINE Login": "LINEã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ãŸèªè¨¼ã‚·ã‚¹ãƒ†ãƒ ",
    "Channel ID": "LINE Developersã§ç™ºè¡Œã•ã‚Œã‚‹ãƒãƒ£ãƒãƒ«ã®è­˜åˆ¥å­",
    "Channel Secret": "APIèªè¨¼ã«ä½¿ç”¨ã™ã‚‹ç§˜å¯†éµ",
    "Channel Access Token": "Messaging APIå‘¼ã³å‡ºã—ã«ä½¿ç”¨ã™ã‚‹ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³",
    "Webhook": "LINEãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰ã®ã‚¤ãƒ™ãƒ³ãƒˆé€šçŸ¥ã‚’å—ä¿¡ã™ã‚‹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ",
    "ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼": "LINE Developersã§ãƒãƒ£ãƒãƒ«ã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã™ã‚‹å˜ä½",
    "ãƒªãƒ—ãƒ©ã‚¤ãƒˆãƒ¼ã‚¯ãƒ³": "Webhookå—ä¿¡æ™‚ã«ç™ºè¡Œã•ã‚Œã‚‹ã€è¿”ä¿¡ç”¨ã®ä¸€æ™‚ãƒˆãƒ¼ã‚¯ãƒ³",
    "postback": "ãƒœã‚¿ãƒ³ã‚¿ãƒƒãƒ—ç­‰ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã§é€ä¿¡ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿",
    "rid": "reader ID - QRã‚³ãƒ¼ãƒ‰ã«å«ã¾ã‚Œã¦ã¯ã„ã‘ãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼è­˜åˆ¥ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿",
    "ä¸€æ–‰é…ä¿¡": "å…¨å‹ã ã¡ã¾ãŸã¯ç‰¹å®šã‚»ã‚°ãƒ¡ãƒ³ãƒˆã¸ã®ä¸€æ–‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡",
    "ã‚¹ãƒ†ãƒƒãƒ—é…ä¿¡": "æ™‚é–“çµŒéã‚„æ¡ä»¶ã«å¿œã˜ã¦æ®µéšçš„ã«é€ä¿¡ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚·ãƒ¼ã‚±ãƒ³ã‚¹",
    "ãƒªãƒã‚¤ãƒ³ãƒ€é…ä¿¡": "ç‰¹å®šã®ã‚¤ãƒ™ãƒ³ãƒˆæ—¥ã«å¯¾ã™ã‚‹äº‹å‰é€šçŸ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
    "ã‚·ãƒŠãƒªã‚ª": "ä¸€é€£ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é…ä¿¡ãƒ•ãƒ­ãƒ¼ã‚’ã¾ã¨ã‚ãŸå˜ä½",
    "èª­è€…": "ã‚·ãƒŠãƒªã‚ªã«ç™»éŒ²ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼",
    "é€šæ•°ã‚«ã‚¦ãƒ³ãƒˆ": "LINEå…¬å¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®èª²é‡‘å¯¾è±¡ã¨ãªã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ•°ã®ã‚«ã‚¦ãƒ³ãƒˆ"
  };
}
```

---

## 14. å¤‰æ›´å±¥æ­´

```typescript
interface ChangeHistory {
  versions: [
    {
      version: "1.0.0";
      date: "2025-12-09";
      author: "Claude Opus 4.5";
      changes: [
        "åˆç‰ˆä½œæˆ",
        "8ã¤ã®åŸºæœ¬æ©Ÿèƒ½ã®è¦ä»¶å®šç¾©",
        "APIé€£æºè¦ä»¶ã®è©³ç´°åŒ–",
        "ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ã®å®šç¾©ï¼ˆTypeScriptã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼‰",
        "ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶ã®æ˜ç¢ºåŒ–",
        "ãƒ†ã‚¹ãƒˆãƒ»é‹ç”¨è¦ä»¶ã®è¿½åŠ "
      ];
      basedOn: [
        "UTAGEå…¬å¼ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ï¼ˆ8ãƒšãƒ¼ã‚¸ï¼‰",
        "LINE Messaging APIä»•æ§˜",
        "LINE Login APIä»•æ§˜"
      ];
    }
  ];
}
```

---

## 15. ã¾ã¨ã‚

æœ¬è¦ä»¶å®šç¾©æ›¸ã¯ã€UTAGEã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹LINEåŸºæœ¬é€£æºæ©Ÿèƒ½ã®å®Ÿè£…ã«å¿…è¦ãªè©³ç´°è¦ä»¶ã‚’ç¶²ç¾…çš„ã«å®šç¾©ã—ã¾ã—ãŸã€‚

### 15.1 é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ

1. **èªè¨¼æƒ…å ±ã®ç®¡ç†**: Messaging APIã¨LINEãƒ­ã‚°ã‚¤ãƒ³èªè¨¼ã§ç•°ãªã‚‹4ã¤ã®èªè¨¼æƒ…å ±ãŒå¿…è¦
2. **LINEãƒ­ã‚°ã‚¤ãƒ³èªè¨¼æ¨å¥¨**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨æ©Ÿèƒ½æ€§ã®è¦³ç‚¹ã‹ã‚‰å¼·ãæ¨å¥¨
3. **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚«ã‚¦ãƒ³ãƒˆãƒ­ã‚¸ãƒƒã‚¯**: æœ€å¤§5è¦ç´ ã§ã‚‚1é€šã¨ã—ã¦ã‚«ã‚¦ãƒ³ãƒˆ
4. **QRã‚³ãƒ¼ãƒ‰å–å¾—ã®æ³¨æ„**: å¿…ãšãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã§å–å¾—ã—ã€ridãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å«ã¾ãªã„ã“ã¨ã‚’æ¤œè¨¼
5. **ãƒ‰ãƒ¡ã‚¤ãƒ³ä¸€è‡´**: ãƒ•ã‚¡ãƒãƒ«ãƒšãƒ¼ã‚¸ã¨LINEç™»éŒ²ãƒšãƒ¼ã‚¸ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã¯å¿…ãšä¸€è‡´
6. **Webhookç½²åæ¤œè¨¼**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãŸã‚å¿…é ˆå®Ÿè£…
7. **LINEè¦ç´„æº–æ‹ **: åˆ©ç”¨è¦ç´„ãƒ»ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ»ãƒãƒªã‚·ãƒ¼ã¸ã®æº–æ‹ ãŒå¿…é ˆ

### 15.2 æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

æœ¬è¦ä»¶å®šç¾©æ›¸ã«åŸºã¥ãã€ä»¥ä¸‹ã®é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚ºã¸é€²ã‚€ã“ã¨ãŒã§ãã¾ã™ï¼š

1. **è¨­è¨ˆãƒ•ã‚§ãƒ¼ã‚º**: ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆã€APIè¨­è¨ˆ
2. **å®Ÿè£…ãƒ•ã‚§ãƒ¼ã‚º**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å®Ÿè£…
3. **ãƒ†ã‚¹ãƒˆãƒ•ã‚§ãƒ¼ã‚º**: å˜ä½“ãƒ†ã‚¹ãƒˆã€çµ±åˆãƒ†ã‚¹ãƒˆã€E2Eãƒ†ã‚¹ãƒˆ
4. **ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ•ã‚§ãƒ¼ã‚º**: ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒã€æœ¬ç•ªç’°å¢ƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤
5. **é‹ç”¨ãƒ•ã‚§ãƒ¼ã‚º**: ç›£è¦–ã€ä¿å®ˆã€ç¶™ç¶šçš„æ”¹å–„

---

**æ–‡æ›¸ä½œæˆæ—¥**: 2025å¹´12æœˆ9æ—¥
**ä½œæˆè€…**: Claude Opus 4.5
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: æ‰¿èªå¾…ã¡
