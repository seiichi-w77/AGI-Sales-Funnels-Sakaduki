# AGI Sales Funnels Sakaduki - 実装スケジュール

## プロジェクト概要

| 項目 | 内容 |
|------|------|
| 総Issue数 | 115件 (#31-#145) |
| フェーズ数 | 9フェーズ |
| 要件定義書 | 19ファイル (約1,062KB) |
| 原則 | モックアプリ禁止・全機能実装必須 |

---

## スケジュール概要

### Phase 1: Core Infrastructure (基盤構築)
**Issues**: #31-#40 (10件)
**必要工数**: 中

| Issue | タスク | 優先度 | 依存 | ステータス |
|-------|--------|--------|------|------------|
| #31 | プロジェクト初期化 (Next.js 14 + TypeScript + Tailwind) | P0 | - | ✅ 完了 |
| #32 | データベース設計 + Prisma Schema | P0 | #31 | ✅ 完了 |
| #33 | 認証システム (NextAuth.js + 2FA) | P0 | #32 | 🔲 未着手 |
| #34 | ワークスペース管理 | P0 | #33 | 🔲 未着手 |
| #35 | ユーザープロフィール | P1 | #33 | 🔲 未着手 |
| #36 | チーム・コラボレーター管理 | P1 | #34 | 🔲 未着手 |
| #37 | 監査ログシステム | P2 | #33 | 🔲 未着手 |
| #38 | サブスクリプション・請求 (Stripe) | P1 | #33 | 🔄 進行中 |
| #39 | 共通UIコンポーネント (shadcn/ui) | P0 | #31 | 🔲 未着手 |
| #40 | 多言語対応 (next-intl) | P1 | #31 | 🔲 未着手 |

**Phase 1 クリティカルパス**: #31 → #32 → #33 → #34

---

### Phase 2: Page Builder & Funnels (ページエディター・ファネル)
**Issues**: #41-#55 (15件)
**必要工数**: 大

| Issue | タスク | 優先度 | 依存 |
|-------|--------|--------|------|
| #41 | ドラッグ&ドロップエディター基盤 | P0 | #39 |
| #42 | セクション・行・カラムシステム | P0 | #41 |
| #43 | コンテンツ要素 (見出し、テキスト、画像、動画) | P0 | #42 |
| #44 | フォーム要素 (入力、セレクト、チェックボックス) | P0 | #42 |
| #45 | ボタン・リンク要素 | P0 | #42 |
| #46 | ポップアップシステム | P1 | #42 |
| #47 | ヘッダー・フッター管理 | P1 | #42 |
| #48 | テーマ・スタイルシステム | P1 | #41 |
| #49 | ファネル作成・管理 | P0 | #42 |
| #50 | ファネルステップ管理 | P0 | #49 |
| #51 | 6種類ファネルテンプレート | P1 | #50 |
| #52 | A/Bスプリットテスト | P2 | #50 |
| #53 | ファネル共有・クローン | P2 | #49 |
| #54 | ドメイン接続 | P1 | #49 |
| #55 | カスタムCSS/JavaScript | P2 | #41 |

**Phase 2 クリティカルパス**: #39 → #41 → #42 → #49 → #50

---

### Phase 3: Products & Commerce (商品・EC)
**Issues**: #56-#70 (15件)
**必要工数**: 大

| Issue | タスク | 優先度 | 依存 |
|-------|--------|--------|------|
| #56 | 商品管理 (CRUD) | P0 | #32 |
| #57 | 価格設定 (単発/サブスク/分割) | P0 | #56 |
| #58 | 商品バリアント | P1 | #56 |
| #59 | 在庫管理 | P1 | #56 |
| #60 | ショッピングカート | P0 | #56 |
| #61 | チェックアウトフロー | P0 | #60, #38 |
| #62 | 注文管理 | P0 | #61 |
| #63 | サブスクリプション管理 | P1 | #57, #38 |
| #64 | 税金計算 | P1 | #61 |
| #65 | 請求書生成・管理 | P1 | #62 |
| #66 | フルフィルメント | P2 | #62 |
| #67 | 割引・クーポン | P1 | #60 |
| #68 | PayPal連携 | P2 | #61 |
| #69 | Order Bump | P1 | #61 |
| #70 | Upsell/Downsell | P1 | #61 |

**Phase 3 クリティカルパス**: #56 → #60 → #61 → #62

---

### Phase 4: Contacts & CRM (コンタクト管理)
**Issues**: #71-#80 (10件)
**必要工数**: 中

| Issue | タスク | 優先度 | 依存 |
|-------|--------|--------|------|
| #71 | コンタクト一覧・検索 | P0 | #32 |
| #72 | コンタクトプロフィール | P0 | #71 |
| #73 | カスタム属性 | P1 | #71 |
| #74 | タグ管理 | P0 | #71 |
| #75 | セグメント (スマートリスト) | P1 | #74 |
| #76 | CSV インポート/エクスポート | P1 | #71 |
| #77 | 一括アクション | P1 | #71 |
| #78 | アクティビティトラッキング | P1 | #72 |
| #79 | パイプライン (CRM) | P2 | #71 |
| #80 | カスタマーセンター | P2 | #72 |

**Phase 4 クリティカルパス**: #71 → #72 → #74 → #75

---

### Phase 5: Email & Automation (メール・自動化)
**Issues**: #81-#95 (15件)
**必要工数**: 大

| Issue | タスク | 優先度 | 依存 |
|-------|--------|--------|------|
| #81 | メールテンプレートエディター | P0 | #41 |
| #82 | ブロードキャスト作成・送信 | P0 | #81, #71 |
| #83 | オーディエンス設定 | P1 | #82, #75 |
| #84 | マージタグ (パーソナライゼーション) | P1 | #82 |
| #85 | テスト送信 | P1 | #82 |
| #86 | スケジュール送信 | P1 | #82 |
| #87 | SMTP連携 (SendGrid) | P0 | #82 |
| #88 | メールドメイン認証 | P1 | #87 |
| #89 | 配信停止管理 | P0 | #82 |
| #90 | ワークフロー作成・管理 | P0 | #32 |
| #91 | トリガー設定 | P0 | #90 |
| #92 | ワークフローステップ (12種類) | P0 | #90 |
| #93 | 条件分岐 | P1 | #92 |
| #94 | Webhook連携 | P1 | #90 |
| #95 | カート放棄シーケンス | P1 | #90, #60 |

**Phase 5 クリティカルパス**: #81 → #82 → #87 / #90 → #91 → #92

---

### Phase 6: Courses & LMS (コース・学習管理)
**Issues**: #96-#105 (10件)
**必要工数**: 中

| Issue | タスク | 優先度 | 依存 |
|-------|--------|--------|------|
| #96 | コース作成・管理 | P0 | #32 |
| #97 | モジュール・レッスン管理 | P0 | #96 |
| #98 | 動画ホスティング | P0 | #97 |
| #99 | ドリップコンテンツ | P1 | #97 |
| #100 | 受講者登録管理 | P1 | #96, #71 |
| #101 | 進捗トラッキング | P1 | #97 |
| #102 | 完了証明書 | P2 | #101 |
| #103 | コースメール自動化 | P1 | #96, #90 |
| #104 | コーステーマカスタマイズ | P2 | #96 |
| #105 | クイズ・テスト機能 | P2 | #97 |

**Phase 6 クリティカルパス**: #96 → #97 → #98

---

### Phase 7: LINE Integration (LINE連携)
**Issues**: #106-#125 (20件)
**必要工数**: 大

| Issue | タスク | 優先度 | 依存 |
|-------|--------|--------|------|
| #106 | LINE公式アカウント連携 | P0 | #32 |
| #107 | Messaging API設定 | P0 | #106 |
| #108 | LINE Login設定 | P0 | #106 |
| #109 | 7種類メッセージタイプ | P0 | #107 |
| #110 | LINE一斉送信 | P0 | #109, #71 |
| #111 | LINEステップ配信 | P1 | #109 |
| #112 | LINEリマインダ配信 | P1 | #109 |
| #113 | リッチメニュー作成 | P0 | #107 |
| #114 | リッチメニュー自動切替 | P1 | #113 |
| #115 | LINE自動応答 | P1 | #107 |
| #116 | LINE友だち一覧 | P0 | #107, #71 |
| #117 | 1to1チャット | P0 | #116 |
| #118 | メール・LINEアカウント統合 | P1 | #116 |
| #119 | LINE通知設定 (Slack等) | P2 | #107 |
| #120 | BAN検知・アラート | P1 | #107 |
| #121 | 登録経路分析 | P1 | #116 |
| #122 | シナリオグループ管理 | P1 | #109 |
| #123 | シナリオ作成・設定 | P1 | #122 |
| #124 | シナリオアクション設定 | P1 | #123 |
| #125 | Googleスプレッドシート連携 | P2 | #124 |

**Phase 7 クリティカルパス**: #106 → #107 → #109 → #110 / #113 → #116 → #117

---

### Phase 8: Affiliate System (アフィリエイト)
**Issues**: #126-#135 (10件)
**必要工数**: 中

| Issue | タスク | 優先度 | 依存 |
|-------|--------|--------|------|
| #126 | アフィリエイトプログラム作成 | P0 | #32 |
| #127 | アフィリエイト登録・認証 | P0 | #126 |
| #128 | コミッションプラン (Tier 1 & 2) | P0 | #126 |
| #129 | アフィリエイトキャンペーン | P1 | #126 |
| #130 | 商品コミッション設定 | P1 | #128, #56 |
| #131 | ペイアウト管理 | P1 | #128 |
| #132 | アフィリエイト資料提供 | P2 | #126 |
| #133 | カスタムアフィリエイトコード | P1 | #127 |
| #134 | クリック・コンバージョン追跡 | P0 | #126 |
| #135 | 45日間Cookie追跡 | P1 | #134 |

**Phase 8 クリティカルパス**: #126 → #127 → #128 → #134

---

### Phase 9: Analytics & Others (アナリティクス・その他)
**Issues**: #136-#145 (10件)
**必要工数**: 中

| Issue | タスク | 優先度 | 依存 |
|-------|--------|--------|------|
| #136 | アナリティクスダッシュボード | P0 | #32 |
| #137 | ファネルアナリティクス | P0 | #136, #49 |
| #138 | レポート機能 | P1 | #136 |
| #139 | ライブビュー | P2 | #136 |
| #140 | GA4連携 | P1 | #136 |
| #141 | Meta Pixel連携 | P1 | #136 |
| #142 | カウントダウンタイマー | P1 | #43 |
| #143 | 予約・アポイントメント | P2 | #32 |
| #144 | コミュニティ | P2 | #32 |
| #145 | MessageHub | P2 | #117 |

**Phase 9 クリティカルパス**: #136 → #137

---

## 必要リソース

### 開発チーム
| ロール | 人数 | 担当範囲 |
|--------|------|----------|
| Frontend Engineer | 2-3人 | UI/UX, ページエディター, フロントエンド全般 |
| Backend Engineer | 2-3人 | API, データベース, 認証, 決済連携 |
| DevOps Engineer | 1人 | CI/CD, インフラ, 監視 |
| QA Engineer | 1人 | テスト自動化, 品質管理 |

### インフラストラクチャ
| サービス | 用途 | 月額目安 |
|----------|------|----------|
| Vercel Pro | ホスティング | $20/member |
| PostgreSQL (Supabase/Neon) | データベース | $25-50 |
| Redis (Upstash) | キャッシュ | $10-20 |
| Cloudflare R2 | ストレージ | 従量制 |
| SendGrid | メール配信 | $20-100 |
| Stripe | 決済 | 2.9% + 30¢/tx |
| LINE Developers | LINE連携 | 無料〜従量制 |

### 外部API
- Stripe API (決済)
- PayPal API (決済)
- LINE Messaging API (LINE連携)
- LINE Login API (LINE認証)
- SendGrid API (メール)
- Google Analytics 4 API (分析)
- Meta Conversions API (広告連携)

---

## 並列実行計画

### 並列実行グループA (Phase 1-2)
```
Timeline A1: #31 → #32 → #33 → #34 → #36
Timeline A2: #31 → #39 → #41 → #42 → #43-#45
Timeline A3: #33 → #35, #37, #38, #40
```

### 並列実行グループB (Phase 3-4)
```
Timeline B1: #56 → #57-#59 → #60 → #61 → #62-#70
Timeline B2: #71 → #72-#80
```

### 並列実行グループC (Phase 5-6)
```
Timeline C1: #81 → #82-#89
Timeline C2: #90 → #91-#95
Timeline C3: #96 → #97-#105
```

### 並列実行グループD (Phase 7-9)
```
Timeline D1: #106 → #107-#125
Timeline D2: #126 → #127-#135
Timeline D3: #136 → #137-#145
```

---

## 品質基準

| 項目 | 基準 |
|------|------|
| テストカバレッジ | 80%以上 |
| ReviewAgent品質スコア | 80点以上で合格 |
| TypeScript | strict mode エラーゼロ |
| ESLint | エラー・警告ゼロ |
| Lighthouse Score | Performance 90+, Accessibility 90+ |

---

## Miyabiエージェント連携

### 実行フロー
```
1. Issue作成 → IssueAgent (自動ラベル分類)
2. 分析 → CoordinatorAgent (DAG分解、並列実行計画)
3. 実装 → CodeGenAgent (コード生成)
4. レビュー → ReviewAgent (品質チェック 80点以上)
5. テスト → TestAgent (テスト実行)
6. PR → PRAgent (Draft PR作成)
7. デプロイ → DeploymentAgent (自動デプロイ)
```

### 状態遷移
```
pending → analyzing → implementing → reviewing → testing → deploying → done
```

---

## MVP (Minimum Viable Product)

### MVP必須Issue (最短経路)
```
#31 → #32 → #33 → #39 → #41 → #42 → #49 → #50 → #56 → #60 → #61 → #71
```

### MVP機能範囲
1. ユーザー認証・ログイン
2. ワークスペース作成
3. 基本的なページエディター
4. シンプルなファネル作成
5. 商品管理・カート・チェックアウト
6. 基本的なコンタクト管理

---

## ドキュメントバージョン

| 項目 | 値 |
|------|-----|
| 作成日 | 2025-12-09 |
| 更新日 | 2025-12-09 |
| 作成者 | Claude Opus 4.5 |
| 参照 | PROJECT_PLAN.md, requirements/*.md |
